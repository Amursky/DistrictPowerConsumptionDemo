{"version":3,"sources":["Cfg.js","customToast.js","Utils.js","Meter.js","Object.js","Data.js","ListGroupToggleViewMapOrMeters.js","ButtonUser.js","NavBar.js","TableMeterEnergy.js","TableInfo.js","Request.js","ProgressTimeout.js","NetOperation.js","CardMeter.js","MeterCards.js","MeterBars.js","DropDownMonth.js","ListGroupToggleMetersCardsOrChart.js","DropDownSort.js","RadioSortDir.js","EditFilter.js","DropDownSize.js","Instruments.js","LlMap.js","ObjectList.js","SlidePanelLeft.js","SlidePanelRight.js","ModalUserAuth.js","ModalObjectInfo.js","UserInactivityIndicator.js","ModalUserInfo.js","AppMeters.js","index.js","UserActivity.js"],"names":["appTitle","tileSizesArr","tileSizesCla","sortKinds","monthsShort","monthsDays","metersView","cfg","user","timeout","currentTabIdx","currentObj","prefixMeterIdx","sizeTileIdx","sortKindIdx","sortAsc","filter","monthIdx","viewIdx","tariffs","name","color","sizes","map","lng","lat","zoom","mapSave","mapCfg","getCenter","getZoom","localStorage","setItem","JSON","stringify","mapLoad","this","key","parse","getItem","init","full","short","_step","_iterator","_createForOfIteratorHelper","s","n","done","tariff","value","push","err","e","f","length","days","now","Date","mn","getMonth","yr","getFullYear","i","daysInMonth","concat","toString","substr","rs","getComputedStyle","document","querySelector","widthLeftPanel","parseInt","getPropertyValue","widthCard","widthIdx","sortMeters","meter1","meter2","c1","c2","n1","n2","j","result","digits","Set","asc","a","title","b","count","charAt","has","Number","charCodeAt","isNaN","energy","alert","aYear","aMonth","monStart","monFinish","getDate","Math","round","Object","defineProperty","set","currentObject","get","customToast","success","msg","options","arguments","undefined","toast","objectSpread","className","error","info","about","utils","formatDateTime","dt","_dt","toLocaleTimeString","toLocaleDateString","formatDate","sleep","ms","Promise","resolve","setTimeout","toastAbout","aMsg","aOptions","containerId","position","autoClose","isLiteralObject","toastInfo","aPosition","toastSuccess","toastError","toastsClear","dismiss","pxToEm","px","element","documentElement","temporaryElement","createElement","style","setProperty","appendChild","baseFontSize","parseFloat","fontSize","parentNode","removeChild","constructor","genRandomDate","dateFrom","deltaYears","dateYears","random1","random2","abs","sin","genRandonInteger","min","max","random","METERS","model","link","Meter","idx","classCallCheck","id","String","tarifCount","getTarifCount","floor","dt0","valueOf","modelNo","item","serialNo","padStart","ceil","note","rs485Count","substring","k","Kyiv_Obolon","lon","fetchAddress","object","uri","fetch","coord","Content-Type","then","response","ok","Error","status","json","catch","newObject","y","cos","pos","r","x","metersCount","data","objects","meters","obj","time","items","objectInfo","onMetersChanged","getObjects","_getObjects","asyncToGenerator","_regeneratorRuntime","mark","_callee","params","addr","errors","wrap","_context","prev","next","all","addresses","nObjects","PromiseState","splice","indexOf","post_address","display_name","address","road","house_number","console","log","message","onFinish","stop","_x","apply","getMeters","receiveMeters","bind","Data_createForOfIteratorHelper","setMeterData","resetMeters","resetData","_step2","_iterator2","getInfo","pars","receiveInfo","ptr","setMeterInfo","ListGroupToggleViewMapOrMeters","props","_React$useState","React","useState","_React$useState2","slicedToArray","objHighlight","setObjHighlight","tabIdx","onClick","currentTarget","onChanged","useEffect","objectName","class0","class1","react_default","ListGroup","horizontal","Item","action","active","disabled","memo","ref","caption","variant","Fragment","Button","size","person","titleBtn1","Navbar","bg","expand","Container","fluid","onBtnOffcanvasObjectListOrInstruments","alt","src","width","height","Brand","_href","Offcanvas","minWidth","aria-labelledby","placement","Header","closeButton","Title","Body","display","justifyContent","src_ListGroupToggleViewMapOrMeters","onSelectTab","currObj","src_ButtonUser","showUserInfo","onBtnOffcanvasTogglerMapOrObject","list","TableMeterEnergy","u","meter","table","perc","h","chartHint","toFixed","units","hint","replace","shift","sel","cardWdt","cardCfc","entry","index","textAlign","split","join","ResponsiveContainer","aspect","PieChart","cursor","Pie","cx_","cy_","startAngle","endAngle","innerRadius","dataKey","label","labelLine","Cell","fill","Label","TableInfo","lineHeight","Table","source","itemClass","href","target","rel","colSpan","Request","progress","getData","dataRef","interval","start","progressValue","waitFor","doTimeout","procedure","setInterval","doProgress","doSuccess","createClass","reset","clearInterval","clearTimeout","ProgressTimeout","margins","ProgressBar","animated","NetOperation","working","setWorking","_React$useState3","_React$useState4","loading","setLoading","useRef","_React$useState5","_React$useState6","setProgress","refBtnRetry","cTimeout","onRequest","current","setStatus","onFinished","onError","onProgress","startWorking","focus","statusMessage","Modal","show","centered","dialogClassName","fullscreen","Footer","alignItems","Spinner","animation","marginLeft","marginRight","aria-label","fontWeight","process","CardMeter","_this","possibleConstructorReturn","getPrototypeOf","call","onMouseOver","assertThisInitialized","onMouseOut","onSglClick","onDblClick","onGetInfo","doubleClickTimeout","clickedTimeout","flipped","createRef","state","mouseOver","badge","badgeClass","unflip","cardStyle","close","netOperation","onDoubleClick","src_TableMeterEnergy","margin","top","bottom","left","right","src_TableInfo","setState","netFinish","preventDefault","notify","Component","text","search","src_CardMeter","metersState","unflipAll","closeAll","charts","tarName","tarIdx","setCharts","indexes","forEach","tarColor","Point","chart","MeterBars","_this2","updateDimensions","resized","dataCount","chartRef","axisXmax","prepareData","elem","xAxisMap","up","niceTicks","setNull","window","innerWidth","offsetWidth","calcAspect","forceUpdate","addEventListener","onDataChanged","removeEventListener","doAfter","inset","domain","renderLabel","t1","t2","t3","c3","legend_layout","legend_align","debounce","BarChart","setAxisXmax","layout","barCategoryGap","barSize","CartesianGrid","strokeDasharray","XAxis","xAxisId","type","tickMargin","unit","orientation","_interval","YAxis","yAxisId","tick","Tooltip","Bar","stackId","isAnimationActive","isAnimationAtive","Legend","verticalAlign","align","textAnchor","dominantBaseline","DropDownMonth","onSelect","onItemClick","DropdownButton","menuVariant","month","Dropdown","newIdx","ListGroupToggleMetersCardsOrChart","DropDownSort","sort","eventKey","RadioSortDir","onChange","Form","Check","checked","EditFilter","FormControl","placeholder","DropDownSize","sizeIdx","setSizeIdx","onWidthIdxChanged","sizeIdxMax","doChange","onMetersSortChanged","onSortChanged","onObjectInfo","src_DropDownMonth","src_DropDownSort","src_RadioSortDir","src_EditFilter","onFilterChanged","src_ListGroupToggleMetersCardsOrChart","onViewChanged","src_DropDownSize","onSizeChanged","tl","tc","tr","cr","br","bc","bl","cl","mapWnd","bnd","counts","countsChanged","outOf","_northEast","_southWest","lonLess","lonMore","latLess","latMore","MapEvents","useMapEvents","moveend","bounds","getBounds","onMapEvent","MapBounds","useMap","CenterMarker","tooltips","flyTo","CounterTL","CounterBL","CounterTR","CounterBR","CounterCL","transform","CounterCR","CounterTC","CounterBC","MarkerCounters","values","MapPlaceholder","array","find","arr","refMarkers","LeafIcon","L","extend","blueIcon","iconUrl","shadowUrl","iconAnchor","grayIcon","refMap","focusMarker","icon","marker","mrk","_icon","isTooltipOpen","toggleTooltip","unfocusMarker","_","selectMarker","refMarker","MapContainer","center","scrollWheelZoom","whenReady","mapInstance","TileLayer","url","cur","dir","per","ofs","opy","zdx","Marker","zIndexOffset","eventHandlers","click","clickMarker","keypress","originalEvent","code","keypressMarker","autoPanOnFocus","lib_Tooltip","direction","offset","opacity","permanent","_React$useReducer","useReducer","_React$useReducer2","clickObject","refItems","hintMarker","showTooltip","unhintMarker","hideTooltip","dlgObjectInfo","showObjectInfo","activeIdx","scrollIntoView","behavior","block","refItem","as","Toggle","Menu","clkObjectInfo","SlidePanel","onClose","onObjChanged","onHide","padding","src_ObjectList","src_Instruments","SlidePanelRight","forwardRef","setShow","useImperativeHandle","open","cLoginNotAuth","cLoginTimeout","cLoginConnecting","cLoginNotSpecified","cLoginSuccess","cLoginNotFound","cLoginSuccessAfter","UserAccountTitle","setTitle","strAccount","clrAccount","ButtonAbout","setVisible","question_circle","hidden","ModalUserAuth","enabled","setEnabled","inputName","inputPswd","btnLogin","focused","refState","newState","refUserAccountTitle","setFocus","login","un","access rights","account state","account valid from","account valid till","password","component","onLogin","refButtonAbout","setAboutState","onTextChanged","onKeyPress","charCode","onFocus","Msg","_ref","closeToast","toastProps","onOpen","shown","reduce","res","val","demoAuto","delay","backdrop","keyboard","enforceFocus","restoreFocus","fullscreen_","Group","Row","Col","sm","column","Control","autoComplete","CellPlaceHolder","Placeholder","xs","TablePlaceHolder","rows","trunc","row","request","dataOwner","getObjInfo","notTimeoutOver","onSuccess","pow","dt_inst","ModalObjectInfo","idxObj","setobjectInfo","setShowObjectInfo","obj_new","refTable","nItems","scrollable","_container","container","tabIndex","ModalObjectInfo_TableInfo","marginLeft_","UserInactivityToast","Infinity","isFinite","visibility","toastId","TYPE","WARNING","hideProgressBar","ERROR","isActive","update","render","ModalUserInfo","tableCell","aData","aKey","aStyle","keys","comp","visible","autoFocus","Status","AppMeters","refBadWindow","badWindow","setBadWindow","instrumentsDisabled","setInstrumentsDisabled","setFilter","_React$useState7","_React$useState8","mapTooltips","setMapTooltips","_React$useState9","_React$useState10","setStatusMessage","_React$useState11","_React$useState12","setNetOperation","_React$useState13","_React$useState14","setMetersState","userTimeout","refSlidePanelLeft","refSlidePanelRight","onResized","errWindowSize","innerHeight","pauseTimeout","resumeTimeout","callbackUserTimeout","refUserInactivityToast","timeoutLast","useCallback","objObjectInfo","refModalObjectInfo","refModalUserInfo","onGetMeters","previousState","updateMeters","reSort","refContent","mainClass","toastAboutWidth","getElementById","emMax","src_NavBar","_filter","src_LlMap","src_MeterCards","cardSize","src_MeterBars","src_ModalUserAuth","fOnLogin","fOnAfterLoginError","doOnLogin","startTimeout","doOnError","src_ModalObjectInfo","AppMeters_Status","SlidePanelLeft_SlidePanel","src_SlidePanelRight","react_toastify_esm","closeOnClick","transition","Flip","enableMultiContainer","toastStyle_","backgroundColor","root","createRoot","App","WrappedComponent","timeoutMinutes","timer","cTimeoutLast","setLastTimeout","callbackTimeout","resetTimeout","event","onKeyDown","onMouseMove","fSetLastTimeout","aTimeout","UserActivity"],"mappings":"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","file":"static/js/main.0986a04c.chunk.js","sourcesContent":["//import {data} from './Data.js';\r\n\r\nconst appTitle = \"District Power Consumption (demo)\";\r\n\r\nconst size_sm = \"small\";\r\nconst size_md = \"medium\";\r\nconst size_lg = \"large\";\r\nconst tileSizesArr = [size_sm, size_md, size_lg];\r\nconst tileSizesCla = [\"card-sm\", \"card-md\", \"card-lg\"];\r\n// const tileSizesCfg = [\t{capt: size_sm, width: 200, height: 150}, \r\n// \t\t\t\t\t\t{capt: size_md, width: 400, height: 300},\r\n// \t\t\t\t\t\t{capt: size_lg, width: 600, height: 450} ];\r\nconst sortKinds = [\"default\"];\r\nconst monthsShort = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\nconst monthsDays = [];\r\nconst metersView = [\"Cards\", \"Chart\"];\r\n\r\nconst cfg = {\r\n\tuser: null,\r\n\t//demoAuto: true,\r\n\ttimeout: false,\r\n\tcurrentTabIdx: 0,\r\n\tcurrentObj: null,\r\n\tprefixMeterIdx: null,\r\n\tsizeTileIdx: 1,\r\n\tsortKindIdx: 0,\r\n\tsortAsc: true,\r\n\tfilter: \"\",\r\n\tmonthsDays: [],\r\n\tmonthIdx: 0,\r\n\tviewIdx: 0,\r\n\ttariffs:[ {name: '\"Total\"', color: \"OrangeRed\"}, \r\n\t\t\t  {name: '\"Day\"', color: \"DarkOliveGreen\"}, {name: '\"Night\"', color: \"DarkViolet\"}, {name: '\"Peak\"', color: \"DarkOrange\"}],\r\n\tsizes: {},\r\n\tmap: {lng: 0, lat: 0, zoom: 2},\r\n\tmapSave: function(map) {\r\n\t\tlet mapCfg = map.getCenter();\r\n\t\tmapCfg[\"zoom\"] = map.getZoom();\r\n\t\t//console.log(mapCfg + \">> \");\r\n\t\tlocalStorage.setItem(\"map\", JSON.stringify(mapCfg));\r\n\t},\r\n\tmapLoad: function() {\r\n\t\tlet mapCfg = this.map;\r\n\t\tif (localStorage.key(\"map\")) {\r\n\t\t\tmapCfg = JSON.parse( localStorage.getItem(\"map\") );\r\n\t\t\t//console.log(mapCfg + \"<< \");\r\n\t\t};\r\n\t\treturn mapCfg;\r\n\t},\r\n\t\r\n\tinit: function() {\r\n\t\t//if (localStorage.key(\"map\"))\r\n\t\t//\tthis.map = JSON.parse(localStorage.getItem(\"map\"));\r\n\t\tthis.prefixMeterIdx = {full: \"Appartment\", short: \"apt. \"};\r\n\t\tsortKinds[0] = this.prefixMeterIdx.full;\r\n\t\tfor (let tariff of this.tariffs) {\r\n\t\t\tsortKinds.push(\"Energy \" + tariff.name);\r\n\t\t}\r\n\t\tmonthsDays.length = 0;\r\n\t\tvar now = new Date();\r\n\t\tvar mn = now.getMonth();\r\n\t\tvar yr = now.getFullYear();\r\n\t\tvar days;\r\n\t\tfor(let i=0; i <= 12; i++) {\r\n\t\t\tdays = cfg.daysInMonth(yr, mn);\r\n\t\t\tif (days > 0) {\r\n\t\t\t\tthis.monthsDays.push(days);\r\n\t\t\t\tmonthsDays.push(`${monthsShort[mn]}'${yr.toString().substr(2, 2)}` +\r\n\t\t\t\t\t\t\t\t`  ${days} ${days === 1 ? \"day\" : \"days\"}`);\r\n\t\t\t};\r\n\t\t\tmn -= 1;\r\n\t\t\tif (mn < 0) {\r\n\t\t\t\tmn = 11;\r\n\t\t\t\tyr--;\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet rs = getComputedStyle(document.querySelector('#root'));\r\n\t\tthis.sizes.widthLeftPanel = parseInt(rs.getPropertyValue('--left-width'));\r\n\t\tthis.sizes.widthCard = [];\r\n\t\tthis.sizes.widthCard.push( parseInt(rs.getPropertyValue('--width-card-sm')) );\t\t\r\n\t\tthis.sizes.widthCard.push( parseInt(rs.getPropertyValue('--width-card-md')) );\t\t\r\n\t\tthis.sizes.widthCard.push( parseInt(rs.getPropertyValue('--width-card-lg')) );\r\n\t\tthis.sizes.widthIdx = 1;\r\n\t},\r\n\tsortMeters: function(meter1, meter2) {\r\n\t\tlet result = 0;\r\n\t\tlet digits = new Set([\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"]);\r\n\t\tlet asc = cfg.sortAsc ? 1 : -1;\r\n\t\tvar c1, c2, n1, n2, j; \r\n\t\tswitch (sortKinds[cfg.sortKindIdx]) {\r\n\t\t\tcase(sortKinds[0]): {\r\n\t\t\t\tlet a = meter1.title; \r\n\t\t\t\tlet b = meter2.title;\r\n\t\t\t\tif (!a || !b)\r\n\t\t\t\t\treturn (a < b);\r\n\t\t\t\tlet count = a.length;\r\n\t\t\t\tif (count > b.length) \r\n\t\t\t\t\tcount = b.length;\r\n\t\t\t\tlet i = 0; \r\n\t\t\t\twhile(i < count) {\r\n\t\t\t\t\tc1 = a.charAt(i); c2 = b.charAt(i);\r\n\t\t\t\t\tif (digits.has(c1) && digits.has(c2)) {\r\n\t\t\t\t\t\tn1 = c1; n2 = c2; \r\n\t\t\t\t\t\tj = i + 1;\r\n\t\t\t\t\t\twhile (j < a.length) {\r\n\t\t\t\t\t\t\tif (digits.has(a.charAt(j))) {\r\n\t\t\t\t\t\t\t\tn1 += a.charAt(j);\r\n\t\t\t\t\t\t\t\tj++;\r\n\t\t\t\t\t\t\t} else \r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tj = i + 1;\r\n\t\t\t\t\t\twhile (j < b.length) {\r\n\t\t\t\t\t\t\tif (digits.has(b.charAt(j))) {\r\n\t\t\t\t\t\t\t\tn2 += b.charAt(j);\r\n\t\t\t\t\t\t\t\tj++;\r\n\t\t\t\t\t\t\t} else \r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn (Number(n1) - Number(n2)) * asc; \r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult = a.charCodeAt(i) - b.charCodeAt(i);\r\n\t\t\t\t\t\tif (result)\r\n\t\t\t\t\t\t\treturn result * asc;\r\n\t\t\t\t\t};\r\n\t\t\t\t\ti++;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t};\r\n\t\t\tcase(sortKinds[1]): \r\n\t\t\t\tn1 = isNaN(meter1.energy[0]) ? 0 : meter1.energy[0];\r\n\t\t\t\tn2 = isNaN(meter2.energy[0]) ? 0 : meter2.energy[0];\r\n\t\t\t\treturn (n1 - n2) * asc;\r\n\t\t\tcase(sortKinds[2]): \r\n\t\t\t\tn1 = isNaN(meter1.energy[1]) ? 0 : meter1.energy[1];\r\n\t\t\t\tn2 = isNaN(meter2.energy[1]) ? 0 : meter2.energy[1];\r\n\t\t\t\treturn (n1 - n2) * asc;\r\n\t\t\tcase(sortKinds[3]): \r\n\t\t\t\tn1 = isNaN(meter1.energy[2]) ? 0 : meter1.energy[2];\r\n\t\t\t\tn2 = isNaN(meter2.energy[2]) ? 0 : meter2.energy[2];\r\n\t\t\t\treturn (n1 - n2) * asc;\r\n\r\n\t\t\tcase(sortKinds[4]): \r\n\t\t\t\tn1 = isNaN(meter1.energy[3]) ? 0 : meter1.energy[3];\r\n\t\t\t\tn2 = isNaN(meter2.energy[3]) ? 0 : meter2.energy[3];\r\n\t\t\t\treturn (n1 - n2) * asc;\r\n\t\t\tdefault:\r\n\t\t\t\talert(\"Error in component Cfg: illegal property sortKindIdx value \" + cfg.sortKindIdx);\r\n\t\t}\r\n\t},\r\n\tdaysInMonth: function (aYear, aMonth) {\r\n\t\tlet monStart = new Date(aYear, aMonth, 1);\r\n\t\tlet monFinish = new Date();\r\n\t\tif ((aYear === monFinish.getFullYear()) && (aMonth === monFinish.getMonth())) {\r\n\t\t\tmonFinish = new Date(aYear, aMonth, monFinish.getDate());\r\n\t\t} else {\r\n\t\t\tmonFinish = new Date(aMonth < 12 ? aYear : aYear+1, aMonth < 12 ? aMonth+1 : 0, 1);\r\n\t\t};\r\n\t\treturn Math.round( (monFinish - monStart)/86400000 );// round due to season time transfers\r\n\t}\r\n}\r\n\r\nObject.defineProperty(cfg, \"currentObject\", {\r\n\tset: function (value) {\r\n\t\tif (this.currentObject !== value) {\r\n\t\t\tthis.currentObj = value;\r\n\t\t\t//data.meters = {obj: null, time: null, items: []};\r\n\t\t}\r\n\t},\r\n\tget: function() {\r\n\t\treturn this.currentObj;\r\n\t}\r\n});\r\n\r\n\r\nexport {tileSizesArr, tileSizesCla, sortKinds, monthsDays, metersView, cfg, appTitle};","import './customToast.css'; //https://stackoverflow.com/questions/53295656/simplest-way-to-adjust-background-color-of-a-react-toastify-toast\r\nimport { toast } from 'react-toastify';\r\n//import { css } from 'glamor';\r\n\r\nconst customToast = {\r\n    success(msg, options = {}) {\r\n        return toast.success(msg, {\r\n            ...options,\r\n            className: 'toast-success-container toast-success-container-after',\r\n            //progressClassName: css( {background: '#34A853'} ),\r\n        });\r\n    },\r\n    error(msg, options = {}) {\r\n        return toast.error(msg, {\r\n            ...options,\r\n            className: 'toast-error-container',\r\n            //progressClassName: css( {background: '#EE0022',} ),\r\n        });\r\n    },\r\n    info(msg, options = {}) {\r\n        return toast.info(msg, {\r\n        ...options,\r\n        className: 'toast-info-container',\r\n        //progressClassName: css({background: '#07F',}),\r\n        });\r\n    },\r\n    about(msg, options = {}) {\r\n        return toast.info(msg, {\r\n        ...options,\r\n        className: 'toast-about-container',\r\n        //progressClassName: css({background: '#07F',}),\r\n        });\r\n    }\r\n};\r\n\r\nexport default customToast;","import {toast} from 'react-toastify';\r\nimport customToast from './customToast.js';\r\n\r\nexport const utils = {\r\n\t//optionsDateTime: {year: 'numeric', month: '2-digit', day: '2-digit', second: '2-digit', hour: '2-digit', minute: '2-digit', hour12: false},\r\n\tformatDateTime: function(dt) {\r\n\t\t//return Intl.DateTimeFormat('en-GB', this.optionsDateTime).format(dt).replace(/\\//g,'-').replace(',','');\r\n\t\tlet _dt = new Date(dt);\r\n\t\treturn _dt.toLocaleTimeString() + \" \" + _dt.toLocaleDateString();\r\n\t},\r\n\tformatDate: function(dt) {\r\n\t\t//return Intl.DateTimeFormat('en-GB', this.optionsDateTime).format(dt).replace(/\\//g,'-').replace(',','');\r\n\t\tlet _dt = new Date(dt);\r\n\t\treturn _dt.toLocaleDateString();\r\n\t},\r\n\tsleep: function(ms) {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\t\tsetTimeout(() => resolve(), ms)\r\n\t\t\t}\r\n\t\t)\r\n\t},\r\n\ttoastAbout: function(aMsg, aOptions) {\r\n\t\tvar options = {containerId: 'about', position: \"bottom-center\", autoClose: false};\r\n\t\tif ( this.isLiteralObject(aOptions) ) {\r\n\t\t\toptions = {...options, ...aOptions};\r\n\t\t}\r\n\t\treturn customToast.about(aMsg, options);\r\n\t},\r\n\ttoastInfo: function(aMsg, aPosition = \"bottom-center\") {\r\n\t\treturn customToast.info(aMsg, {containerId: 'info', position: aPosition, autoClose: false});\r\n\t},\r\n\ttoastSuccess: function(aMsg, aPosition = \"bottom-center\") {\r\n\t\treturn customToast.success(aMsg, {containerId: 'info', position: aPosition, autoClose: 5000});\r\n\t},\r\n\ttoastError: function(aMsg, aOptions) {\r\n\t\tvar options = {containerId: 'info', position: \"bottom-center\", autoClose: false};\r\n\t\tif ( this.isLiteralObject(aOptions) ) {\r\n\t\t\toptions = {...options, ...aOptions};\r\n\t\t}\r\n\t\treturn customToast.error(aMsg, options);\r\n\t},\r\n\ttoastsClear: function() {\r\n\t\ttoast.dismiss();\r\n\t},\r\n\tpxToEm: function(px, element) {\r\n\t\telement = element === null || element === undefined ? document.documentElement : element;\r\n\t\tvar temporaryElement = document.createElement('div');\r\n\t\ttemporaryElement.style.setProperty('position', 'absolute', 'important');\r\n\t\ttemporaryElement.style.setProperty('visibility', 'hidden', 'important');\r\n\t\ttemporaryElement.style.setProperty('font-size', '1em', 'important');\r\n\t\telement.appendChild(temporaryElement);\r\n\t\tvar baseFontSize = parseFloat(getComputedStyle(temporaryElement).fontSize);\r\n\t\ttemporaryElement.parentNode.removeChild(temporaryElement);\r\n\t\treturn px / baseFontSize;\r\n\t},\r\n\tisLiteralObject: function(a) {\r\n\t\treturn (!!a) && (a.constructor === Object);\r\n\t},\r\n\tgenRandomDate(dateFrom, deltaYears, dateYears, random1, random2 = 1) {\r\n\t\tconst year = 31536000000;\r\n\t\treturn  dateFrom + deltaYears*year + dateYears * Math.abs( Math.sin(random1 * random2) ) * year;\r\n\t},\r\n\tgenRandonInteger(min, max, random) {\r\n\t\treturn Math.round( min + ((1 + Math.sin(random)) * (max - min) / 2) );\r\n\t}\r\n}","import {cfg} from \"./Cfg.js\";\r\nimport {utils} from \"./Utils.js\";\r\n\r\nconst METERS = [\r\n\t{model: 'NiK 2104', link: 'https://nik.net.ua/en/product/nik-2104-new-1', digits: '6.2'}, \r\n\t{model: 'NiK 2100', link: 'https://nik.net.ua/en/product/nik-2100-new__trashed', digits: '6.2'},  \r\n\t{model: 'NiK 2108', link: 'https://nik.net.ua/en/product/nik-2108', digits: '6.2'},  \r\n\t{model: 'NiK 2106', link: 'https://nik.net.ua/en/product/nik-2106-new-1', digits: '6.2'}\r\n];\r\n\r\nexport default class Meter {\r\n\tconstructor(idx) {\r\n\t\tthis.id = idx;\r\n\t\tthis.title = cfg.prefixMeterIdx.short + String(this.id+1);\r\n\t\tthis.energy = [null, null, null, null];\r\n\t}\r\n\tsetMeterData() {\r\n\t\tthis.tarifCount = this.getTarifCount(this.id, cfg.currentObj.id);\r\n\t\tif (!this.energy) {\r\n\t\t\tthis.energy = [null, null, null, null];\r\n\t\t\tthis.title = cfg.prefixMeterIdx.short + String(this.id+1);\r\n\t\t}\r\n\t\tthis.energy[0] = Math.round(cfg.monthsDays[cfg.monthIdx] * 100 * (4 + 2 * Math.sin(5*this.id + 14*cfg.currentObj.id + 10*cfg.monthIdx))) / 100;\r\n\t\tif (this.tarifCount === 1)\r\n\t\t\tthis.energy[1] = this.energy[0];\r\n\t\telse if (this.tarifCount === 2) {\r\n\t\t\tthis.energy[1] = Math.floor(this.energy[0] * (0.7 + 0.2*Math.sin(15*this.id + 4*cfg.currentObj.id)) * 100) / 100;\r\n\t\t\tthis.energy[2] = Math.round((this.energy[0] - this.energy[1]) * 100) / 100;\r\n\t\t} else {\r\n\t\t\tthis.energy[1] = Math.floor(this.energy[0] * (0.6 + 0.15*Math.sin(15*this.id + 4*cfg.currentObj.id)) * 100) / 100;\r\n\t\t\tthis.energy[2] = Math.floor((this.energy[0] - this.energy[1])  * (0.25 + 0.1*Math.sin(15*this.id + 4*cfg.currentObj.id)) * 100) / 100;\r\n\t\t\tthis.energy[3] = Math.round((this.energy[0] - this.energy[1] - this.energy[2]) * 100) / 100;\r\n\t\t};\r\n\t}\r\n\tsetMeterInfo() {\r\n\t\tthis.info = [];\r\n\t\tconst MS_PER_DAY = 1000 * 60 * 60 * 24;\r\n\t\r\n\t\tlet dt0 = (new Date(new Date().getFullYear(), 0, 1)).valueOf();\r\n\t\tlet modelNo = utils.genRandonInteger(0, METERS.length - 1, this.id*20 + 5);\r\n\t\tthis.info.push( {item: \"meter\", value: METERS[modelNo].model, link: METERS[modelNo].link } );\r\n\t\tlet serialNo = (utils.genRandonInteger(10000, 999999, this.id*9 + 4)).toString().padStart(8, '0');\r\n\t\tthis.info.push( {item: \"serial no.\", value: serialNo} );\r\n\t\tthis.info.push( {item: \"number of tariffs\", value: this.tarifCount} );\r\n\t\tthis.info.push( {item: \"digits on LCD\", value: METERS[modelNo].digits} );\r\n\t\tlet dt = utils.genRandomDate(Date.now(), 0, 1, 2*this.id) + 1;\r\n\t\tif (Math.ceil((dt - Date.now()) / MS_PER_DAY) < 7) {\r\n\t\t\tthis.info.push( {item: \"next verification date\", value: utils.formatDate(dt), note: \"alarm\"} )\r\n\t\t} else \tif (Math.ceil((dt - Date.now()) / MS_PER_DAY) < 30) {\r\n\t\t\tthis.info.push( {item: \"next verification date\", value: utils.formatDate(dt), note: \"warning\"} )\r\n\t\t} else {\r\n\t\t\tthis.info.push( {item: \"next verification date\", value: utils.formatDate(dt)} )\r\n\t\t};\t\t\r\n\t\tdt = utils.genRandomDate(dt0, -8, 2, this.id+1);\r\n\t\tthis.info.push( {item: \"date of manufacture\", value: utils.formatDate(dt)} );\r\n\t\tdt = utils.genRandomDate(dt, 0, 1, 2*this.id + 1);\r\n\t\tthis.info.push( {item: \"date of installation\", value: utils.formatDate(dt)} );\r\n\t\tthis.info.push( {item: \"seal no.\", value: utils.genRandonInteger(100, 999, this.id+4)} );\r\n\t\tthis.info.push( {item: \"RS-485 channel no.\", value: utils.genRandonInteger(1, cfg.currentObj.rs485Count, this.id*4+4)} );\r\n\t\tthis.info.push( {item: \"RS-485 address\", value: Number(serialNo.toString().substring(6))} );\r\n\t}\r\n\tgetTarifCount(i, j) {\r\n\t\tlet k = utils.genRandonInteger(0, 10, 20*i + 50*j);\r\n\t\treturn (k >= 5)\r\n\t\t\t? 3\r\n\t\t\t: (k >= 2 ) ? 2 : 1;\r\n\t\t/*\r\n\t\tlet k = Math.sin(20*i + 50*j);\r\n\t\tif (k > 0)\r\n\t\t\treturn 3\r\n\t\telse if (k > -0.5)\r\n\t\t\treturn 2\r\n\t\telse\t\r\n\t\t\treturn 1;\r\n\t\t*/\r\n  };\r\n}\r\n","import {utils} from './Utils.js';\n\nconst Kyiv_Obolon = {lon: 30.515, lat: 50.522};\n//const City = {lon: -0.09, lat: 51.505};\n\nexport class Obj {\n\tconstructor(idx, onLast) {\n\t\tthis.id = idx;\n\t\tthis.name = `Object #${idx}`;\n\t\t//this.address = \"\";\n\t\t//this.post_address = \"\";\n\t\tlet sin = Math.sin(idx), cos = Math.cos(idx);\n\t\t//this.metersCount = 20 + Math.trunc(10 * sin);\n\t\tlet metersCount = 20 + Math.trunc(10 * sin);\n\t\tconst pos = Kyiv_Obolon, d = 0.005;\n\t\tlet r = d * Math.sin(4 * idx);\n\t\tlet x = pos.lon + r * cos; \n\t\tlet y = pos.lat + r * sin;\n\t\tthis.coord = {lon: x, lat: y};\n\t\tthis.address = fetchAddress(this, onLast, metersCount);\n\t}\n}\n/*\nexport function fetchAddress(object) {\n\treturn new Promise((resolve) => setTimeout(() => resolve(object.name), 1000*object.id));\n}\n*/\nexport function fetchAddress(object) {\n\tconst headers = { 'Content-Type': 'application/json' };\n\tlet uri;\n\tif (object.id % 3 === -1 ) {// !!\n\t\turi = \"https://nominatim.openstreetmapsss.org/reverse?accept-language=en&format=json\"\n\t} else {\n\t\turi = \"https://nominatim.openstreetmaps.org/reverse?accept-language=en&format=json\"\n\t}\n    return fetch(`${uri}&lat=${object.coord.lat}&lon=${object.coord.lon}`, headers)\n\t\t.then( (response) => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error(`HTTP error! Status: ${ response.status }`);\n\t\t\t\t}\n\t\t\t\treturn response.json()\n\t\t\t}\n\t\t)\n\t\t.then( (result) => {return ( {error: 0, response: result} )} )\n\t\t.catch( (error) => {return ( {error: -1, response: error} )} );\n}\n/*\t\t.then(\tresponse => {\n\t\t\t\t\tif (response.ok) \n\t\t\t\t\t\treturn( {error: 0, response: response.json()} )\n\t\t\t\t\telse\n\t\t\t\t\t\treturn( {error: response.status, response: response.json()} )\n\t\t\t\t}, \n\t\t\t\treject => {\n\t\t\t\t\treturn({error: -1, response: {error: reject.message}})\n\t\t\t\t}\n\t\t)\n}\n/*\nfunction fetchAddress(object, onLast, meterCount) {\n\tconst headers = { 'Content-Type': 'application/json' };\n\tlet uri = \"https://nominatim.openstreetmap.org/reverse?accept-language=en&format=json\";\n\t//debugger;\n    fetch(`${uri}&lat=${object.coord.lat}&lon=${object.coord.lon}`, headers)\n\t\t.then(response => {return response.json()})\n\t\t.then(data => {\n\t\t\tobject.post_address = data.display_name;\n\t\t\tobject.address = data.address.road + \" \" + data.address.house_number;\n\t\t\tobject.metersCount = meterCount;\n\t\t\tif (onLast !== undefined)\n\t\t\t\tonLast();\n\t\t})\n}\n*/\nexport function newObject(idx) {\n\tlet sin = Math.sin(idx), cos = Math.cos(idx);\n\tconst pos = Kyiv_Obolon, d = 0.005;\n\tlet r = d * Math.sin(4 * idx);\n\tlet x = pos.lon + r * cos;\n\tlet y; \n\tif (idx === -4) // !!\n\t\ty = \"lattitude\"\n\telse \n\t\ty = pos.lat + r * sin;\n\tlet metersCount = utils.genRandonInteger(10, 30, idx*10 + 10);\n\tlet rs485Count = utils.genRandonInteger(1, 4, idx*10 + 10);\n\treturn {id: idx, name: `Object #${idx}`, coord: {lon: x, lat: y}, metersCount: metersCount, rs485Count: rs485Count};\n}\n","import Meter from './Meter.js';\nimport {newObject, fetchAddress} from './Object.js';\nimport {cfg} from './Cfg.js';\n\nexport const data = {\n\tobjects: [],\n\tmeters: {obj: null, time: null, items: []},\n\tobjectInfo: {obj: null, time: null, items: []},\n\tonMetersChanged: null,\n/*\n\tparams: null,\n\treceiveObjects: function(dataRef, onFinished, result) {\n\t\tthis.params.result.status = 500;\n\t\tthis.params.result.message = \"objects: 5\";\n\t\tthis.params.onFinish();\n\t},\n\tgetObjects:  function(params) {\n\t\tdata.params = params;\n\t\tsetTimeout( data.receiveObjects.bind(data), 3000 );\n\t},\n*/\n\tgetObjects: async function(params) {\n\t\tconst nObjects = 5;\n\t\tdata.objects.length = 0;\n\t\tlet addr = [], objects = [], errors = [], error;\n\t\t//debugger;\n\t\tfor (let i=0; i < nObjects; i++) {\n\t\t\tobjects.push( newObject(i+1) );\n\t\t\taddr.push( fetchAddress(objects[i]) );\n\t\t};\n\t\tawait Promise.all(addr)\n\t\t\t.then( (addresses)=>{\n\t\t\t\tfor (let j=nObjects-1; j >= 0; j--) {\n\t\t\t\t\tif (addresses[j].error && addresses[j].response.PromiseState !== \"fulfilled\") {\n\t\t\t\t\t\tobjects.splice(j, 1);\n\t\t\t\t\t\tif (addresses[j].error < 0)\n\t\t\t\t\t\t\terror = \"Connecting server failure\"\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\terror = addresses[j].response;\n\t\t\t\t\t\tif (errors.indexOf(error) < 0)\n\t\t\t\t\t\t\terrors.push(error);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet obj = addresses[j].response;\n\t\t\t\t\t\tobjects[j].post_address = obj.display_name;\n\t\t\t\t\t\tobjects[j].address = obj.address.road + \" \" + obj.address.house_number;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( (error)=>{\n\t\t\t\tconsole.log(error);\n\t\t\t} );\n\t\tif (objects.length > 0) {\n\t\t\tparams.result.status = 200;\n\t\t\tdata.objects = objects;\n\t\t\tparams.result.message = \"Available objects found: \" + data.objects.length;\n\t\t\tparams.onFinish();\n\t\t} else {\n\t\t\tparams.result.status = 500;\n\t\t\tparams.result.message = \"No available objects found\";\n\t\t\tparams.result.errors = errors;\n\t\t\tparams.onFinish();\n\t\t}\n\t},\n/*\t\n\tgetObjects: function(onFinished) {\n\t\tconst nObjects = 5;\n\t\tvar obj;\n\t\tthis.meters.length = 0;\n\t\tthis.objects.length = 0;\n\t\tfor (let i=1; i <= nObjects; i++) {\n\t\t\tobj = new Obj(i, i < nObjects ? undefined : onFinished);\n\t\t\tif (obj)\n\t\t\t\tthis.objects.push(obj);\n\t\t}\n\t},\n*/\n\tgetMeters: function(params) {\n\t\tdata.params = params;\n\t\tsetTimeout( data.receiveMeters.bind(data), 2000 );\n\t},\n\treceiveMeters: function() {\n\t\tif (this.params) {\n\t\t\tlet msg =  (this.meters.obj === cfg.currentObject) ? \"\" : null;\n\t\t\tthis.meters.obj = cfg.currentObject;\n\t\t\tfor (let meter of data.meters.items)\n\t\t\t\tmeter.setMeterData();\n\t\t\tthis.meters.time = Date.now();\n\t\t\tthis.params.result.status = 200;\n\t\t\tthis.params.result.message = \" meters available: \" + data.meters.items.length;\n\t\t\tthis.params.onFinish(msg);\n\t\t\tif (this.onMetersChanged) {\n\t\t\t\tthis.onMetersChanged();\n\t\t\t}\n\t\t}\n\t},\n\tresetMeters: function() {\n\t\tdata.meters = {obj: null, time: null, items: []}\n\t\tif (cfg.currentObject)\n\t\t\tfor (let i=0; i < cfg.currentObject.metersCount; i++)\n\t\t\t\tdata.meters.items.push( new Meter(i) );\n\t\tif (this.onMetersChanged) {\n\t\t\tthis.onMetersChanged();\n\t\t}\n\t},\n\tresetData: function() {\n\t\tfor (let meter of data.meters.items)\n\t\t\tmeter.energy = [null, null, null, null];\n\t\tdata.meters.time = null;\n\t\tif (this.onMetersChanged) {\n\t\t\tthis.onMetersChanged(true);\n\t\t}\n\t},\n\tgetInfo: function(params) {\n\t\tlet pars = params;\n\t\tsetTimeout( data.receiveInfo.bind(pars), 2000 );\n\t},\n\treceiveInfo: function() {\n\t\tif (this) {\n\t\t\tthis.ptr.setMeterInfo();\n\t\t\tthis.result.status = 200;\n\t\t\tthis.onFinish();\n\t\t}\n\t}\n}\n","import React from \"react\";\nimport './ListGroupToggleViewMapOrMeters.css';\n//import { toast } from \"react-toastify\";\nimport { utils } from \"./Utils.js\";\nimport ListGroup from \"react-bootstrap/ListGroup\";\nimport {cfg} from \"./Cfg.js\";\n\n\nfunction ListGroupToggleViewMapOrMeters(props) { // onChanged - callback переключения, currObj - только для пере-render\n\n\tconst [objHighlight, setObjHighlight] = React.useState(false);\n\tlet tabIdx = cfg.currentTabIdx;\t//const [tabIdx, setTabIdx] = React.useState(cfg.currentTabIdx);\n\tReact.useEffect(\t() => \t{\n\t\t\t\tif (cfg.currentObject && cfg.currentTabIdx === 0) {\n\t\t\t\tsetObjHighlight(true);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetObjHighlight(false);\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t}, [cfg.currentObject]\n\t); \n\n\tfunction onClick(e) {\n\t\tlet i = Number(e.currentTarget.value);\n\t\tif (i !== cfg.currentTabIdx) {\n\t\t\tif (i === 1 && cfg.currentObject == null) {\n\t\t\t\tutils.toastError(\"please, first select an object\", {autoClose: 3000})\n\t\t\t} else {\n\t\t\t\tcfg.currentTabIdx = i;\n\t\t\t\t//setTabIdx(i);\n\t\t\t\tif (props.onChanged === undefined)\n\t\t\t\t\talert(\"Error in component ListGroupToggleViewMapOrMeters: undefined callback function onChanged\")\n\t\t\t\telse {\t\t\t\t\n\t\t\t\t\tprops.onChanged(e);\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t}\n\n\tlet objectName = cfg.currentObject ? cfg.currentObject.name : \"Object not selected\";\n\tconst class0 = \"ListGroupToggleViewMapOrMetersItem\";\n\tconst class1 = cfg.currentObject == null ? class0 + \"-disabled\" : (objHighlight ? class0 + \"-highlighted\" : class0);\n\treturn (\n\t\t<ListGroup horizontal className=\"ListGroupToggleViewMapOrMeters\">\n\t\t\t<ListGroup.Item action className={class0} title=\"map with available objects\"\n\t\t\t\t\t\t\tactive={0 === tabIdx} disabled={props.disabled}\n\t\t\t\t\t\t\tonClick={onClick} value={\"0\"}>\n\t\t\t\tObjects\n\t\t\t</ListGroup.Item>\n\t\t\t<ListGroup.Item action className={class1} title=\"meters of the selected object\"\n\t\t\t\t\t\t\tactive={1 === tabIdx} disabled={props.disabled}\n\t\t\t\t\t\t\tonClick={onClick} value={\"1\"}>\n\t\t\t\t{objectName}\n\t\t\t</ListGroup.Item>\n\t\t</ListGroup>\n\t)\n}\n\nexport default ListGroupToggleViewMapOrMeters\n//export default React.memo(ListGroupToggleViewMapOrMeters)","import React from 'react';\r\nimport Button from \"react-bootstrap/Button\";\r\nimport \"./NavBar.css\";\r\nimport { Person } from \"react-bootstrap-icons\";\r\n\r\n\r\nfunction ButtonUser(props, ref) {\r\n    let caption = props.caption;\r\n    let title = \"user's info\";\r\n    if (props.title !== undefined)\r\n        title = props.title;\r\n    let variant = \"outline-light\";\r\n    if (props.variant) {\r\n        variant = props.variant;\r\n    }\r\n    return(\r\n        <>\r\n            <Button variant={variant} size=\"sm\" \r\n                    disabled={props.disabled} onClick={props.onClick}\r\n                    title={title} className=\"navbar-button_\"> \r\n                <Person className=\"navbar-button-image\"/>\r\n                {caption}\r\n            </Button>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default React.memo(ButtonUser);\r\n\r\n//<img src={process.env.PUBLIC_URL + 'img/user.svg'} alt=\"user's info\" style={{marginRight: \"0.3em\"}}/>\r\n","import \"./NavBar.css\";\r\nimport React from \"react\";\r\nimport Navbar from \"react-bootstrap/Navbar\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Offcanvas from \"react-bootstrap/Offcanvas\";\r\n//import Nav from \"react-bootstrap/Nav\";\r\n//import NavDropdown from \"react-bootstrap/NavDropdown\";\r\n////import { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom';\r\n//import Form from \"react-bootstrap/Form\";\r\n//import FormControl from \"react-bootstrap/FormControl\";\r\nimport Button from \"react-bootstrap/Button\";\r\n//import OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\r\n//import Popover from \"react-bootstrap/Popover\";\r\nimport ListGroupToggleViewMapOrMeters from \"./ListGroupToggleViewMapOrMeters.js\";\r\nimport { List } from \"react-bootstrap-icons\";\r\nimport ButtonUser from \"./ButtonUser.js\";\r\nimport {cfg, appTitle} from \"./Cfg.js\";\r\n\r\n\r\nfunction NavBar(props) { //title, onBtnOffcanvas, onSelectTab\r\n\tlet titleBtn1 = cfg.currentTabIdx === 0 ? \"object list\" : \"instruments panel\";\r\n\r\n\treturn (\r\n\t\t<Navbar key=\"NavBar\" bg=\"secondary\" variant=\"dark\" expand=\"sm\">\r\n\t\t\t<Container fluid>\r\n\t\t\t\t<div className=\"for-sm\">\r\n\t\t\t\t\t<Button variant=\"outline-light\" className=\"me-3 header_btn\"\r\n\t\t\t\t\t\t\ttitle = {titleBtn1}\r\n\t\t\t\t\t\t\tonClick={ () => props.onBtnOffcanvasObjectListOrInstruments() }>\r\n\t\t\t\t\t\t<b>&#9698;</b>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<img  \ttitle=\"Glory to Ukraine !\"\talt=\"Glory to Ukraine !\"\r\n\t\t\t\t\t\tsrc=\"ukrainian_ribbon.svg\"\twidth=\"30\"\theight=\"30\"\r\n\t\t\t\t\t\tclassName=\"d-inline-block align-top\"\r\n\t\t\t\t/>\r\n\t\t\t\t<Navbar.Brand _href=\"#home\" >\r\n\t\t\t\t\t{props.title}\r\n\t\t\t\t</Navbar.Brand>\r\n\t\t\t\t{ /*\r\n\t\t\t\t<Navbar.Toggle className=\"navbar-toggler-focus\" aria-controls={'offcanvasNavbar-expand-sm'} title=\"menu panel\"/>\r\n\t\t\t\t*/ }\r\n\t\t\t\t<Navbar.Offcanvas\tid={\"offcanvasNavbar-expand-sm\"} style={{minWidth: \"fit-content\"}}\r\n\t\t\t\t\t\t\t\t\taria-labelledby={\"offcanvasNavbarLabel-expand-sm\"}\r\n\t\t\t\t\t\t\t\t\tplacement=\"end\">\r\n\t\t\t\t\t<Offcanvas.Header closeButton>\r\n\t\t\t\t\t\t<Offcanvas.Title id={'offcanvasNavbarLabel-expand-sm'}>\r\n\t\t\t\t\t\t\t{appTitle}\r\n\t\t\t\t\t\t</Offcanvas.Title>\r\n\t\t\t\t\t</Offcanvas.Header>\r\n\t\t\t\t\t<Offcanvas.Body>\r\n\t\t\t\t\t\t<div style={{width: \"100%\", display: \"flex\", justifyContent: \"center\"}}>\r\n\t\t\t\t\t\t\t<ListGroupToggleViewMapOrMeters onChanged={props.onSelectTab} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrObj={cfg.currentObject} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={props.disabled}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ButtonUser onClick={props.showUserInfo}/>\r\n\t\t\t\t\t</Offcanvas.Body>\r\n\t\t\t\t</Navbar.Offcanvas>\r\n\t\t\t\t<div className=\"for-sm\">\r\n\t\t\t\t\t<Button variant=\"outline-light\" size=\"sm\"\tdisabled={false} \r\n\t\t\t\t\t\t\ttitle=\"menu panel\" \t\tclassName=\"navbar-button\"\r\n\t\t\t\t\t\t\tonClick={ () => props.onBtnOffcanvasTogglerMapOrObject() }> \r\n            \t\t\t<List \tclassName=\"navbar-button-image\"/>\r\n        \t\t\t</Button>\t\r\n\t\t\t\t</div>\r\n\t\t\t</Container>\r\n\t\t</Navbar>\t\t\r\n\t)\r\n}\r\n\r\nexport default React.memo(NavBar);","import './TableMeterEnergy.css';\n//import React, { Component } from \"react\";\nimport React from \"react\";\nimport { ResponsiveContainer, PieChart, Pie, Cell, Label } from \"recharts\";\nimport {cfg, tileSizesCla} from \"./Cfg.js\";\n\n/*\nclass TableMeterEnergy extends Component {\n    constructor(props) {\n\t\tsuper(props);\n\t}\n\trender() {\n*/\nfunction TableMeterEnergy(props) {\t\t\n\t\tvar meter = props.meter;\n\t\tvar e, u, table= [], perc = [], h = \"\", chartHint = \"\";\n\t\tfor (let i = 0; i <= 3; i++) {\n\t\t\tif (meter.tarifCount >= i) {\n\t\t\t\te = isNaN(meter.energy[i]) ? \"?\" : meter.energy[i].toFixed(2);\n\t\t\t\tu = (e === \"?\" ? \"\" : \"kWh\");\n\t\t\t\tif ((i > 0) && ( Number(table[0].value) > 0 ) && (e !== \"?\"))\n\t\t\t\t\th = `${ (e*100/table[0].value).toFixed(1) }% of total`;\n\t\t\t\th = (e === \"?\" ? \" - data not found\" : `tariff ${cfg.tariffs[i].name}\\n` + h);\n\t\t\t} else {\n\t\t\t\te = \"-----\"; u = \"-----\"; h = `tariff ${cfg.tariffs[i].name}   not configured for this meter`;\n\t\t\t};\n\t\t\ttable.push({value: e, units: u, hint: h});\n\t\t\tif (meter.tarifCount >= i) {\n\t\t\t\tif ((table[0].value === \"?\") || (table[i].value === \"?\"))\n\t\t\t\t\tperc.length = 0\n\t\t\t\telse\n\t\t\t\t\tperc.push({name: \"tariff: \" + cfg.tariffs[i].name, value: e * 100 / table[0].value});\n\t\t\t};\n\t\t};\n\t\tfor (let i=1; i < table.length; i++) {\n\t\t\tchartHint += table[i].hint.replace(\"\\n\", \"   \").replace(\" of total\", \"\") + \"\\n\";\n\t\t};\n\t\tif (perc.length > 0)\n\t\t\tperc.shift();\n\n\t\t\n\t\tvar fontSize = parseFloat(getComputedStyle(document.querySelector(':root')).getPropertyValue('font-size'));\n\t\tlet sel = document.querySelector('.main-cards');\n\t\tif (sel) {\n\t\t\tlet cardWdt = parseFloat(getComputedStyle(sel).getPropertyValue('--width-' + tileSizesCla[cfg.sizeTileIdx]));\n\t\t\tlet cardCfc = parseFloat(getComputedStyle(sel).getPropertyValue('--font-size-card-coef'));\n\t\t\tfontSize = 0.7 * cardWdt / cardCfc;\n\t\t} else {\n\t\t\tconsole.error(`style \".main-card\" not found`);\n\t\t}\n\t// \t<div className=\"table-energy\">\n\t// \t{table.map((entry, index) => (\n\t// \t\t\t<div title={entry.hint} key={index}>\n\t// \t\t\t\t<span style={{color: cfg.tariffs[index].color, fontSize}}> {cfg.tariffs[index].name.replace(/^[\"'](.+(?=[\"']$))[\"']$/, '$1')} </span>\n\t// \t\t\t\t<span className={`table-energy-${index}`} style={{color: cfg.tariffs[index].color}}> {entry.value} </span>\n\t// \t\t\t\t<span className=\"kwh\" style={{fontSize}}> &#32; {entry.units} </span>\n\t// \t\t\t</div>\n\t// \t\t))}\n\t// </div>\n//;replace(/^[\"'](.+(?=[\"']$))[\"']$/, '$1')\n\t\treturn (\n\t\t\t<>\n\t\t\t<table className=\"table-energy\">\n\t\t\t\t<tbody>\n\t\t\t\t{table.map((entry, index) => {\n\t\t\t\t\t\tlet hint = (cfg.sizeTileIdx === 0) ? \"tariff \" + cfg.tariffs[index].name : \"\";\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t\t{ cfg.sizeTileIdx > 0 &&\n\t\t\t\t\t\t\t\t<td className=\"tariff\" title=\"tariff name\" \n\t\t\t\t\t\t\t\t\tstyle={{color: cfg.tariffs[index].color, fontSize, textAlign: \"left\"}} >\n\t\t\t\t\t\t\t\t\t{cfg.tariffs[index].name.split('\"').join('')}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<td style={{textAlign: \"right\"}}>\n\t\t\t\t\t\t\t\t<span \tclassName={`table-energy-${index}`} title={hint}\n\t\t\t\t\t\t\t\t\t\tstyle={{color: cfg.tariffs[index].color}}> {entry.value} </span>\n\t\t\t\t\t\t\t\t<span \tclassName=\"kwh\" style={{fontSize}}> &#32; {entry.units} </span>\t\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\n\t\t\t<div className=\"table-energy\" title={chartHint}>\n\t\t\t\t<ResponsiveContainer width=\"100%\" aspect={1.2} className=\"table-energy-chart\">\n\t\t\t\t\t<PieChart style={{cursor: \"pointer\"}}>\n\t\t\t\t\t\t<Pie \tdata={perc} cx_={10} cy_={10} startAngle={90} endAngle={-270} \n\t\t\t\t\t\t\t\tinnerRadius=\"40%\" dataKey=\"value\" label={false} labelLine={false} \n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{perc.map((entry, index) => (\n\t\t\t\t\t\t\t\t<Cell key={`cell-${index}`} fill={cfg.tariffs[index+1].color} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t<Label value=\"%\" position=\"center\"/>\n\t\t\t\t\t  \t</Pie>\n\t\t\t\t\t</PieChart>\n\t\t\t\t</ResponsiveContainer>\n\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n//}\nexport default TableMeterEnergy;\n\t","import React from 'react';\r\nimport Table from \"react-bootstrap/Table\";\r\nimport './TableInfo.css';\r\nimport {cfg, tileSizesCla} from './Cfg.js';\r\n\r\nfunction TableInfo(props) {\r\n\tvar fontSize = parseFloat(getComputedStyle(document.querySelector(':root')).getPropertyValue('font-size'));\r\n\tvar lineHeight = parseFloat(getComputedStyle(document.querySelector(':root')).getPropertyValue('line-height'));\r\n\tlet sel = document.querySelector('.main-cards');\r\n\tif (sel) {\r\n\t\tlet cardWdt = parseFloat(getComputedStyle(sel).getPropertyValue('--width-' + tileSizesCla[Math.min(1, cfg.sizeTileIdx)]));\r\n\t\tlet cardCfc = parseFloat(getComputedStyle(sel).getPropertyValue('--font-size-card-coef'));\r\n\t\tfontSize = 0.8 * cardWdt / cardCfc;\r\n\t\tlineHeight = cardWdt / cardCfc / 26;\r\n\t} else {\r\n\t\tconsole.error(`style \".main-card\" not found`);\r\n\t}\r\n\r\n\treturn(\r\n\t\t<div className=\"table-info\" style={{lineHeight}}>\r\n\t\t<Table size=\"sm\">\r\n\t\t\t<tbody>\r\n\t\t\t\t{props.source.map( (entry, index) => {\r\n\t\t\t\t\t\tif (entry.item) {\r\n\t\t\t\t\t\t\tlet itemClass = \"table-info-text\";\r\n\t\t\t\t\t\t\tswitch (entry.note) {\r\n\t\t\t\t\t\t\t\tcase \"warning\":\r\n\t\t\t\t\t\t\t\t\titemClass = \"table-info-warning\";\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"alarm\":\r\n\t\t\t\t\t\t\t\t\titemClass = \"table-info-alarm\";\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<tr key={index}>\r\n\t\t\t\t\t\t\t\t\t<td style={{textAlign: \"left\", fontSize}} className={itemClass}> {entry.item} </td>\r\n\t\t\t\t\t\t\t\t\t<td style={{textAlign: \"right\", fontSize}} className={itemClass}> \r\n\t\t\t\t\t\t\t\t\t\t{ entry.link\r\n\t\t\t\t\t\t\t\t\t\t\t?\t<a href={entry.link} target=\"_blank\" rel=\"noopener noreferrer\"> {entry.value} </a>\r\n\t\t\t\t\t\t\t\t\t\t\t:\tentry.value\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<tr key={index}>\r\n\t\t\t\t\t\t\t\t\t<td colSpan={2} style={{textAlign: \"center\"}}> \r\n\t\t\t\t\t\t\t\t\t\t<b><i> {entry.value} </i></b> \r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</tbody>\r\n\t\t</Table>\r\n\t\t</div>\r\n\t);\r\n}\r\n/*\r\n<Table size=\"sm\">\r\n\t<tbody>\r\n\t\t{props.source.map( (entry, index) => {\r\n\t\t\treturn(\r\n\t\t\t\t<tr key={index}>\r\n\t\t\t\t\t<td style={{textAlign: \"left\"}}>{entry.item}</td>\r\n\t\t\t\t\t<td style={{textAlign: \"right\"}}>{entry.value}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t)})}\r\n\t</tbody>\r\n</Table>\r\n*/\t\t\t\t\t\r\nexport default TableInfo;","export class Request {\r\n\ttimeout = null;      // <= setTimeout, used as flag for longing timeout\r\n    interval = null;     // <= setInterval, used for indicating timeout progress\r\n    onFinish = null;     // f()\r\n\tstart = null;        // now()\r\n\tresult = null;       // object {status: N, message: String} used as a reference !!\r\n    progress = null;     // {interval: NN ms, procedure: f()}\r\n    progressValue = 0;   // \r\n\r\n    constructor (timeout, onFinish, progress, getData, dataRef) {\r\n        if (onFinish)\r\n            this.onFinish = onFinish\r\n        else {\r\n            this.result = {status: 400, message: `error in Request.constructor: undefined function onFinish`};\r\n            return;\r\n        };\r\n        this.result = {status: 0, message: `data querying...`};\r\n        let waitFor = timeout ? timeout : 0;//3000;\r\n        this.start = Date.now();\r\n        if (waitFor) {\r\n            this.timeout = setTimeout( this.doTimeout.bind(this), waitFor );\r\n            if (progress && progress.procedure && progress.interval && progress.interval < waitFor / 2) {\r\n                this.progress = progress;\r\n                this.progressValue = 0;\r\n                this.interval = setInterval( this.doProgress.bind(this), progress.interval );\r\n                this.doProgress();\r\n            }\r\n        } else {\r\n            this.timeout = -1;\r\n        }\r\n        if (getData) {\r\n            getData( {ptr: dataRef, onFinish: this.doSuccess.bind(this), result: this.result} );\r\n        }\r\n    }\r\n    doTimeout(onFinish) {\r\n        if (this.timeout) {\r\n            this.doProgress() ;\r\n            this.result.status = \"\";\r\n            this.result.message = `Server didn't answer in ${((Date.now() - this.start)/1000).toFixed(1)} s`;\r\n            this.reset();\r\n            this.onFinish(this.result);\r\n        }\r\n    }\r\n    doProgress() {\r\n        if (this.timeout && this.interval && this.progress) {\r\n            this.progress.procedure(this.progressValue);\r\n            this.progressValue += this.progress.interval;\r\n        }\r\n    }\r\n\treset() {\r\n\t\tif (this.interval) {\r\n\t\t\tclearInterval(this.interval);\r\n\t\t\tthis.interval = null;\r\n\t\t};\r\n\t\tif (this.timeout) {\r\n\t\t\tclearTimeout(this.timeout);\r\n\t\t\tthis.timeout = null;\r\n\t\t};\r\n        this.start = null;\r\n        this.progress = null;\r\n        this.progressValue = 0;\r\n\t}\r\n\tdoSuccess(message) {\r\n\t\tif (this.timeout) {\r\n\t\t\t//this.result.status = 200;\r\n\t\t\t//this.result.message = `answer received in ${Date.now() - this.start} ms`;\r\n\t\t\tthis.reset();\r\n            if (message !== undefined && message != null)\r\n                this.result.message = message;\r\n\t\t\tthis.onFinish(this.result);\r\n\t\t};\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport ProgressBar from 'react-bootstrap/ProgressBar'\r\n\r\nexport function ProgressTimeout(props) {\r\n    return (\r\n        <div style={{width: \"100%\", margins: \"1em 0 1em 0\"}}>\r\n            <ProgressBar variant=\"info\" animated label={(props.now/1000).toFixed(1) + \" s\"} max={props.timeout} now={props.now}/>\r\n        </div>\r\n    )\r\n}","import React from 'react';\nimport Modal from \"react-bootstrap/Modal\";\nimport Spinner from \"react-bootstrap/Spinner\";\nimport Button from \"react-bootstrap/Button\";\nimport { Request } from \"./Request.js\";\nimport { ProgressTimeout } from \"./ProgressTimeout.js\";\n\nexport function NetOperation(props) { // params = {procedure, onFinish, setStatus, dataRef}, statusMessage\n\tconst [working, setWorking] = React.useState(false);\n\t//const [error, setError] = React.useState([]);\n\tconst [loading, setLoading] = React.useState(true);\n\tconst message = React.useRef(\"\");\n\tconst [progress, setProgress] = React.useState(0);\n\tconst refBtnRetry = React.useRef();\n\tconst cTimeout = 6000;\n\tconst errors = React.useRef(null);\n\n\tfunction onFinished(result) {\n\t\terrors.current = null;\n\t\tprops.params.onFinish(result);\n\t\tsetWorking(false);\n\t\tif (props.params.setStatus)\n\t\t\tprops.params.setStatus(\"\");\n\t}\n\tfunction onError() {\n\t\tsetLoading(false);\n\t\tif (props.params.onError) {\n\t\t\tprops.params.onError();\n\t\t};\n\t\tif (props.params.setStatus) {\n\t\t\tprops.params.setStatus(\"\");\n\t\t};\n\t}\n\tfunction onRequest(result) {\n\t\terrors.current = null;\n\t\terrors.status = undefined;\n\t\tif (result.status === 200)\n\t\t\tonFinished(result)\n\t\telse {\n\t\t\terrors.current = [result.message];////setError(error[0].toUpperCase() + \"<p>\" + error.slice(1) + \"</p>\");\n\t\t\tif (result.errors)\n\t\t\t\terrors.current = errors.current.concat(result.errors);\n\t\t\terrors.status = result.status;\n\t\t\tonError();\n\t\t}\n\t}\n\tfunction onProgress(value) {\n\t\tsetProgress(value);\n\t}\n\tfunction startWorking() {\n\t\tif (loading) {\n\t\t\tnew Request(cTimeout / 2, onRequest, {interval: cTimeout/10, procedure: onProgress}, props.params.procedure /*null*/, props.params.dataRef) // !!\n\t\t} else { \n\t\t\tsetLoading (true, new Request(cTimeout, onRequest, {interval: cTimeout/10, procedure: onProgress}, props.params.procedure, props.params.dataRef) );\n\t\t\tprops.params.setStatus(message.current);\n\t\t};\n\t\tsetWorking(true);\n\t};\n\tReact.useEffect(\t() => \t{\n\t\tif (refBtnRetry.current) {\n\t\t\trefBtnRetry.current.focus();\n\t\t}\n\t}); \n\n\tif (!working && props.params.procedure) {\n\t\tmessage.current = props.statusMessage;\n\t\tstartWorking();\n\t};\n\tif (errors.current) {\n\t\tlet mark = errors.status !== \"\" ? \"\" : 'This error was emulated for demo-purpose ! Please click/press button \"Retry\".';\n\t\treturn (\n\t\t\t<Modal \tshow={true} size=\"lg\" centered  aria-labelledby=\"contained-modal-title-vcenter\"\n\t\t\t\t\t\t\t\tdialogClassName=\"modal-50w\" fullscreen=\"lg-down\">\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\n\t\t\t\t\t\tNetwork Operation Error\n\t\t\t\t\t</Modal.Title>\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t{errors.current.map( (error, index) => {\n\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t<p style={{color: \"red\"}} key={index}><b> {error} </b></p>\n\t\t\t\t\t\t)})}\t\t\n\t\t\t\t\t<p><mark> {mark} </mark></p>\n\t\t\t\t</Modal.Body>\n\t\t\t\t<Modal.Footer style={{height: \"4em\", justifyContent: \"space-between\"}}>\n\t\t\t\t\t{loading &&\n\t\t\t\t\t\t<div style={{display: \"flex\", alignItems: \"center\"}}>\n\t\t\t\t\t\t\t<Spinner animation=\"border\" variant=\"primary\" size=\"lg\"/>\n\t\t\t\t\t\t\t<div style={{marginLeft: \"1em\"}}> <i> connecting server... </i> </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t{loading && cTimeout >= 1000 &&\n\t\t\t\t\t\t<div style={{width: \"40%\", display: \"flex\", alignItems: \"center\"}}>\n\t\t\t\t\t\t\t<div style={{marginRight: \"1em\"}}> <i> waiting </i> </div>\n\t\t\t\t\t\t\t<ProgressTimeout timeout={cTimeout} now={progress} />\n\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t{!loading &&\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t<span/>\n\t\t\t\t\t\t<Button variant=\"primary\" size=\"sm\" title=\"repeat operation\" aria-label=\"repeat\" ref={refBtnRetry}\n\t\t\t\t\t\t\t\tstyle={{fontSize: \"1.0rem\", fontWeight: \"500\"}} onClick={ ()=>startWorking() } >\n\t\t\t\t\t\t\t<img src={process.env.PUBLIC_URL + 'img/synchronize.svg'} alt=\"repeat operation\" style={{marginRight: \"0.3em\"}}/>\n\t\t\t\t\t\t\tRetry\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n\t\t)\n\t} else {\n\t\treturn null;\n\t};\n}\n/*\n\t\t\t<Modal {...props} \tshow={true} size=\"lg\" centered  aria-labelledby=\"contained-modal-title-vcenter\"\n\t\t\t\t\t\tdialogClassName=\"modal-50w\" fullscreen=\"lg-down\">\n\t\t\t\t<Modal.Header closeButton>\n\t\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\n\t\t\t\t\t\tNetwork Error\n\t\t\t\t\t</Modal.Title>\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t{error}\n\t\t\t\t</Modal.Body>\n\t\t\t\t<Modal.Footer style={{justifyContent: \"space-between\"}}>\n\t\t\t\t\t{loading &&\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t<span style={{marginLeft_: \"10px\"}}><i>connecting server...</i></span>\n\t\t\t\t\t\t<Spinner animation=\"border\" variant=\"primary\" size=\"lg\"/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t\t{!loading &&\n\t\t\t\t\t\t<>\n\t\t\t\t\t\tretry\n\t\t\t\t\t\t<Button className=\"btn\" style={{align: \"left\"}} variant=\"outline-light\" size=\"sm\" \n\t\t\t\t\t\t\t\ttitle=\"repeat operation\" aria-label=\"repeat\" onClick={()=>startWorking()} >\n\t\t\t\t\t\t\t<img src={process.env.PUBLIC_URL + '/img/refresh_gray.svg'} alt=\"refresh\"/>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n*/","import React, { Component } from 'react';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\nimport {cfg, tileSizesCla} from \"./Cfg.js\";\r\nimport {data} from './Data.js';\r\nimport TableMeterEnergy from \"./TableMeterEnergy.js\";\r\nimport TableInfo from \"./TableInfo.js\";\r\nimport {NetOperation} from './NetOperation.js';\r\n//import {Toast} from 'bootstrap'; <- sample: https://codepen.io/nishant88/pen/yYyePL\r\n//import { toast } from \"react-toastify\";\r\n//import \"react-toastify/dist/ReactToastify.css\";\r\nimport {utils} from './Utils.js';\r\n\r\nclass CardMeter extends Component {\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onMouseOver = this.onMouseOver.bind(this);\r\n\t\tthis.onMouseOut = this.onMouseOut.bind(this);\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onSglClick = this.onSglClick.bind(this);\r\n\t\tthis.onDblClick = this.onDblClick.bind(this);\r\n\t\tthis.onGetInfo = this.onGetInfo.bind(this);\r\n\t\tthis.doubleClickTimeout = 250; // default doubleclick timeout\r\n\t\tthis.clickedTimeout = null;\r\n\t\tthis.flipped = React.createRef();\r\n\t\tthis.flipped.current = false;\r\n\t\tthis.state = {mouseOver: false};\r\n\t}\r\n\trender() {\r\n\t\tvar meter = this.props.meter;\r\n\t\tlet badge = null;\r\n\t\tlet variant = 'secondary';\r\n\t\tif (meter.title) {\r\n\t\t\tbadge = meter.title;\r\n\t\t\tvar badgeClass = this.state.mouseOver ? 'badge bg-primary' : 'badge bg-secondary';\r\n\t\t\tvariant = this.state.mouseOver ? 'primary' : 'secondary';\r\n\t\t};\r\n\t\tthis.flipped.current = this.props.unflip ? false : this.flipped.current;\r\n\t\tvar cardStyle = this.props.close\r\n\t\t\t\t\t\t\t?\t'card closed ' + tileSizesCla[cfg.sizeTileIdx]\r\n\t\t\t\t\t\t\t:\t(this.flipped.current ? 'card flipped' : 'card') + ' ' + tileSizesCla[cfg.sizeTileIdx];\r\n\t\tlet netOperation = {procedure: this.state.netOperation, onFinish: this.onGetInfo, setStatus: this.state.setStatus, dataRef: meter};\r\n\t\treturn(\r\n\t\t\t<div \tclassName={cardStyle} \t\t\t\r\n\t\t\t\t\tonMouseOver={this.onMouseOver} \tonMouseOut={this.onMouseOut} \r\n\t\t\t\t\tonClick={this.onClick} \t\t\tonDoubleClick={this.onDblClick} >\r\n\t\t\t\t<div className=\"face front\"> \r\n\t\t\t\t\t<div className=\"inner\">   \r\n\t\t\t\t\t\t{ badge &&\r\n\t\t\t\t\t\t\t<div className=\"meter-badge text-right\">\r\n\t\t\t\t\t\t\t\t<span className={badgeClass}> {badge} </span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{ meter.energy[0] &&\r\n\t\t\t\t\t\t\t<div className=\"meter-content\">\r\n\t\t\t\t\t\t\t\t<TableMeterEnergy meter={meter}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{ !meter.energy[0] &&\r\n\t\t\t\t\t\t    <Spinner \tanimation=\"border\" variant={variant}\r\n\t\t\t\t\t\t\t\t\t\tstyle={\t{margin: \"auto\", position: \"absolute\", \r\n\t\t\t\t\t\t\t\t\t\t\t\t top: \"0\", bottom: \"0\", left: \"0\", right: \"0\"} }/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div> \r\n\t\t\t\t<div className=\"face back\"> \r\n\t\t\t\t\t<div className=\"inner\">   \r\n\t\t\t\t\t\t{ badge &&\r\n\t\t\t\t\t\t\t<div className=\"meter-badge text-left\">\r\n\t\t\t\t\t\t\t\t<span className={badgeClass}> {badge} </span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{ meter.info &&\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<TableInfo source={meter.info}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{ !meter.info &&\r\n\t\t\t\t\t\t    <Spinner \tanimation=\"border\" variant={variant} \r\n\t\t\t\t\t\t\tstyle={\t{margin: \"auto\", position: \"absolute\", \r\n\t\t\t\t\t\t\t\t\t top: \"0\", bottom: \"0\", left: \"0\", right: \"0\"} }/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<NetOperation\tparams={netOperation} statusMessage={this.state.statusMessage}/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\tonMouseOver(e) {\r\n\t\tthis.setState({mouseOver: true});\r\n\t}\r\n\tonMouseOut(e) {\r\n\t\tthis.setState({mouseOver: false});\r\n\t}\r\n\tonClick(e) {\r\n\t\tif (!this.clickedTimeout && !this.state.netOperation) {\r\n\t\t\tthis.clickedTimeout = setTimeout(this.onSglClick, this.doubleClickTimeout);\r\n\t\t}\r\n\t}\r\n\tonGetInfo(result) {\r\n\t\tthis.setState( {statusMessage: \"\", netOperation: null, setStatus: null, netFinish: null} );\r\n\t\tthis.props.setStatus(\"\");\r\n\t}\r\n\tonSglClick(e) {\r\n\t\tthis.clickedTimeout = null;\r\n\t\tthis.flipped.current = !this.flipped.current;\r\n\t\t/*\r\n\t\tthis.setState( this.state );\r\n\t\tif (this.flipped.current)\r\n\t\t\tsetTimeout( this.onSglClick, 1000 );\r\n\t\t*/\r\n\t\tif (this.flipped.current && !this.props.meter.info) {\r\n\t\t\tthis.props.setStatus(\"requesting meter's info ...\");\r\n\t\t\tthis.setState( {statusMessage: \"requesting meter's info ...\",\r\n\t\t\t\t\t\t\tnetOperation: data.getInfo, setStatus: this.props.setStatus, \r\n\t\t\t\t\t\t\tnetFinish: this.onGetInfo} );\r\n\t\t} else {\r\n\t\t\tthis.setState( this.state );\r\n\t\t\t//setTimeout( this.onSglClick(e), 2000 );\r\n\t\t}\r\n\t}\t\r\n\tonDblClick(e) {\r\n\t\te.preventDefault();\r\n\t\tclearTimeout(this.clickedTimeout);\r\n\t\tthis.clickedTimeout = null;\r\n\t\tnotify(`dbl click on \"${this.props.meter.title}\"`);\r\n\t}\t\r\n}\r\n\r\nconst notify = (text) => {\r\n  \tutils.toastError(text);\r\n};\r\n\r\nexport default CardMeter;\r\n\r\n","import React from 'react';\r\nimport CardMeter from './CardMeter.js';\r\nimport {data} from './Data.js';\r\nimport { cfg } from \"./Cfg.js\";\r\n\r\nfunction MeterCards(props) {\r\n\tif (data.meters.items) {\r\n\t\tlet filter = cfg.filter;//props.filter\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t{data.meters.items.map( function(meter, index) {\r\n\t\t\t\tif (!meter.title || meter.title.search(filter) !== -1)\r\n\t\t\t\t\tif (meter.id === -1)\r\n\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t<div className=\"flip\" key={meter.id}>\r\n\t\t\t\t\t\t\t<CardMeter meter={meter} setStatus={props.setStatus}  unflip={false} close={false} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)  \r\n\t\t\t\t\telse\r\n\t\t\t\t\treturn(\r\n\t\t\t\t\t\t<div className=\"flip\" key={meter.id}>\r\n\t\t\t\t\t\t\t<CardMeter \tmeter={meter} setStatus={props.setStatus}  \r\n\t\t\t\t\t\t\t\t\t\tunflip={props.metersState.unflipAll} close={props.metersState.closeAll} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\treturn null;\r\n\t\t\t})}\r\n\t\t\t</>\r\n\t\t)\r\n\t} else {\r\n\t\treturn\r\n\t}\r\n}\r\n\r\nexport default React.memo(MeterCards);\r\n//export default MeterCards\r\n","import React, { Component } from \"react\";\r\nimport { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend} from \"recharts\";\r\nimport Spinner from 'react-bootstrap/Spinner';\r\nimport { data } from \"./Data.js\";\r\nimport { cfg } from \"./Cfg.js\";\r\n\r\nconst charts = [{tarName: \"#1\", tarIdx: 1}, {tarName: \"#2\", tarIdx: 2}, {tarName: \"#3\", tarIdx: 3}];\r\nfunction setCharts(indexes) {\r\n\tcharts.length = 0;\r\n\tindexes.forEach( (index, idx, indexes) => {\r\n\t\tcharts.push( {\ttarName: cfg.tariffs[index].name,\r\n\t\t\t\t\t\ttarIdx: index,\r\n\t\t\t\t\t\ttarColor: cfg.tariffs[index].color } )\r\n\t\t}\r\n\t)\r\n}\r\nclass Point {\r\n\tconstructor(meter, name = \"\") {\r\n\t\tthis.name = meter ? meter.title : name;\r\n\t\tcharts.forEach( (chart, idx) => {\r\n\t\t\t\t\t\t\tthis[\"tariff \" + charts[idx].tarName] = meter ? meter.energy[ charts[idx].tarIdx ] : 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  )\r\n\t}\r\n}\r\n\r\nconst constCritWidth = 700;\r\nclass MeterBars extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t//this.onClick = this.onClick.bind(this);\r\n\t\tthis.ref = React.createRef();\r\n\t\tthis.updateDimensions = this.updateDimensions.bind(this);\r\n\t\tthis.aspect = 1;\r\n\t\tthis.resized = false;\r\n\t\tthis.width = null;\r\n\t\tthis.dataCount = -1;\r\n\t\tthis.charts = [];\r\n\t\tthis.chartRef = React.createRef();\r\n\t\tthis.axisXmax = 0;\t\r\n\t\tthis.state = { aspect: 1, show: true, data: this.prepareData() };\r\n\t}\r\n\tsetAxisXmax(elem) {\r\n\t\tif ( this.state.closeAll ) {\r\n\t\t\tthis.axisXmax = 0;\r\n\t\t} else {\r\n\t\t\tif (elem) {\r\n\t\t\t\tlet a = elem.state.xAxisMap.up.niceTicks;\r\n\t\t  \t\tthis.axisXmax = a[a.length-1];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tprepareData(setNull) {\r\n\t\tlet result = [];\r\n\t\tif (cfg.sortKindIdx === 3)\r\n\t\t\tsetCharts([2, 3, 1])\r\n\t\telse if (cfg.sortKindIdx === 4)\r\n\t\t\tsetCharts([3, 1, 2])\r\n\t\telse\r\n\t\t\tsetCharts([1, 2, 3]);\r\n\r\n\t\tif (setNull) {\r\n\t\t\tdata.meters.items.forEach( \t(meter, index, meters) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (meter.title.search(cfg.filter) !== -1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tresult.push( new Point(null, meter.title) );\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tdata.meters.items.forEach( \t(meter, index, meters) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (meter.title.search(cfg.filter) !== -1)\r\n\t\t\t\t\t\t\t\t\t\t\t\tresult.push( new Point(meter) );\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tcalcAspect(width) {\r\n\t\tlet h = (window.innerWidth <= constCritWidth ? 24 : 0) + 2*30 + 25 + this.state.data.length*35 + (this.state.data.length-1)*2;\r\n\t\treturn width ? width/h : 1;\r\n\t}\r\n\tupdateDimensions() {\r\n\t\tif (this.ref.current) {\r\n\t\t\tthis.width = this.ref.current.offsetWidth;\r\n\t\t\tthis.aspect = this.calcAspect(this.width);\r\n\t\t\tthis.resized = true;\r\n\t\t\tthis.forceUpdate();\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.updateDimensions();\r\n\t\twindow.addEventListener(\"resize\", this.updateDimensions.bind(this));\r\n\t\tdata.onMetersChanged = this.onDataChanged.bind(this);\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\twindow.removeEventListener(\"resize\", this.updateDimensions.bind(this));\r\n\t\tdata.onMetersChanged = null;\r\n\t}\r\n\tonDataChanged(setNull = false, doAfter = undefined) {\r\n\t\tthis.setState( {data: this.prepareData(setNull), closeAll: setNull}, doAfter );\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.netOperation) {\r\n\t\t\treturn(\r\n\t\t\t\t<div\tref={this.ref} \tstyle={\t{margin: \"auto\", height: \"100%\", position: \"relative\", inset: \"0\"} }>\r\n\t\t\t\t\t<Spinner \tanimation=\"border\" variant=\"secondary\" \r\n\t\t\t\t\t\t\t\tstyle={\t{margin: \"auto\", position: \"absolute\", inset: \"0\"} } />\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\tif (this.resized)\r\n\t\t\t\tthis.resized = false;\r\n\t\t\tlet domain = this.axisXmax ? [0, this.axisXmax] : [0, \"auto\"];\r\n\t\t\t//let domain_dn = [0, this.axisXmax];\r\n    \t\tlet label = this.state.closeAll ? null : renderLabel;\r\n\t\t\tif (this.dataCount !== this.state.data.length) {\r\n\t\t\t\tthis.aspect = this.calcAspect(this.width);\r\n\t\t\t\tthis.dataCount = this.state.data.length;\r\n\t\t\t}\r\n\t\t\t//let aspect = this.aspect;\r\n\t\t\tlet t1 = \"tariff \" + charts[0].tarName;\r\n\t\t\tlet t2 = \"tariff \" + charts[1].tarName;\r\n\t\t\tlet t3 = \"tariff \" + charts[2].tarName;\r\n\t\t\tlet c1 = charts[0].tarColor, c2 = charts[1].tarColor, c3 = charts[2].tarColor;\r\n\t\t\tlet legend_layout = window.innerWidth > constCritWidth ? \"vertical\" : \"horizontal\"; \r\n\t\t\tlet legend_align = window.innerWidth > constCritWidth ? \"right\" : \"center\";\r\n\t\t\treturn (\r\n\t\t\t\t<div  \tref={this.ref} style={ {display:\"flex\", width:\"100%\"} } >\r\n\t\t\t\t<ResponsiveContainer width=\"100%\" aspect={this.aspect} debounce={1} >\r\n\t\t\t\t\t<BarChart \tref={this.setAxisXmax.bind(this)} layout=\"vertical\" barCategoryGap=\"0.1\" barSize=\"200px\"\r\n\t\t\t\t\t\t\t\tdata={this.state.data} margin={{top: 20, right: 0, left: 0, bottom: 5}} \r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CartesianGrid strokeDasharray=\"3 3\" horizontal={false} />\r\n\t\t\t\t\t\t<XAxis \txAxisId=\"up\" type=\"number\" tickMargin=\"10\" unit=\" kWh\" domain={domain} \r\n\t\t\t\t\t\t\t\torientation=\"top\" _interval=\"preserveStartEnd\" />\r\n\t\t\t\t\t\t<XAxis \txAxisId=\"dn\" type=\"number\" tickMargin=\"10\" unit=\" kWh\" domain={domain} \r\n\t\t\t\t\t\t\t\torientation=\"bottom\" _interval=\"preserveStartEnd\" />\r\n\t\t\t\t\t\t<YAxis yAxisId=\"lft\" type=\"category\" dataKey=\"name\" orientation=\"left\"/>\r\n\t\t\t\t\t\t<YAxis yAxisId=\"rgt\" tick={false} orientation=\"right\"/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<Tooltip/>\r\n\t\t\t\t\t\t<Bar dataKey={t1} xAxisId=\"up\" yAxisId=\"lft\" stackId={t1} fill={c1} isAnimationActive={true}/>\r\n\t\t\t\t\t\t<Bar dataKey={t2} xAxisId=\"up\" yAxisId=\"lft\" stackId={t1} fill={c2} isAnimationAtive={true}/>\r\n\t\t\t\t\t\t<Bar dataKey={t3} xAxisId=\"up\" yAxisId=\"lft\" stackId={t1} fill={c3} isAnimationActive={true} label={label} />\r\n\t\t\t\t\t\t<Legend layout={legend_layout} verticalAlign=\"top\" align={legend_align} top=\"0\"/>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t} \r\n\t} \r\n\t//onClick(e) {\r\n\t//}\r\n}\r\n\r\nconst renderLabel = (props) => {\r\n\tconst { x, y, width, value } = props;\r\n\tvar text = isNaN(value) ? \"?\" : value.toFixed(2);// + \" kWh\";\r\n\treturn (\r\n\t\t<g>\r\n\t\t\t<text x={x + width + 10} y={y + 20} textAnchor=\"left\" dominantBaseline=\"middle\">\r\n\t\t\t\t{text}\r\n\t\t\t</text>\r\n\t\t</g>\r\n\t  );\r\n};\r\n\r\nexport default React.memo(MeterBars)\r\n","import React, { Component } from \"react\";\r\nimport Dropdown from \"react-bootstrap/Dropdown\";\r\nimport DropdownButton from 'react-bootstrap/DropdownButton';\r\nimport {cfg, monthsDays} from \"./Cfg.js\";\r\n\r\nclass DropDownMonth extends Component {\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onSelect = this.onSelect.bind(this);\r\n\t}\r\n\trender() { // onMetersDataChanged, disabled\r\n\t\tlet caption = \"\" + monthsDays[cfg.monthIdx];\r\n\t\tlet onItemClick = this.onSelect;\r\n\t\treturn (\r\n\t\t\t<DropdownButton title={caption} variant=\"secondary\" menuVariant=\"dark\" \r\n\t\t\t\t\t\t\tclassName=\"d-grid gap-2\"\r\n\t\t\t\t\t\t\tdisabled={this.props.disabled} >\r\n\t\t\t\t{monthsDays.map(function(month, idx) {\r\n\t\t\t\t\tvar active = (month === monthsDays[cfg.monthIdx]);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Dropdown.Item key={month} active={active} onClick={onItemClick}>\r\n\t\t\t\t\t\t\t{month}  \r\n\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n    \t\t</DropdownButton>\r\n\t\t)\r\n\t}\r\n/*\r\n\t\t\t<Dropdown onSelect={this.onSelect} disabled={this.props.disabled} drop=\"down\" className=\"d-grid gap-2\">\r\n\t\t\t\t<Dropdown.Toggle variant=\"secondary\">\r\n\t\t\t\t\t{caption}\r\n\t\t\t\t</Dropdown.Toggle>\r\n\t\t\t\t<Dropdown.Menu variant=\"dark\">\r\n\t\t\t\t\t{monthsDays.map(function(size) {\r\n\t\t\t\t\t\tvar active = (size === monthsDays[cfg.monthIdx]);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Dropdown.Item key={size} eventKey={size} active={active}>{size}</Dropdown.Item>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Dropdown.Menu>\r\n\t\t\t</Dropdown>\r\n*/\r\n\tonSelect(e) {\r\n\t\tlet item = e.target.text;\r\n\t\tif (item !== monthsDays[cfg.monthIdx]) {\r\n\t\t\tlet newIdx = monthsDays.indexOf(item);\r\n\t\t\tif (newIdx < 0)\r\n\t\t\t\talert(\"Error in component DropDownMonth: error selected value \" + e)\r\n\t\t\telse {\r\n\t\t\t\tcfg.monthIdx = newIdx;\r\n\t\t\t\tthis.forceUpdate();\r\n\t\t\t\tif (this.props.onChanged === undefined)\r\n\t\t\t\t\talert(\"Error in component DropDownMonth: undefined callback function onChanged\")\r\n\t\t\t\telse\t\t\t\t\r\n\t\t\t\t\tthis.props.onChanged(item);\r\n\t\t\t};\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport default React.memo(DropDownMonth)","import React, { Component } from \"react\";\r\nimport ListGroup from \"react-bootstrap/ListGroup\";\r\nimport {metersView, cfg} from \"./Cfg.js\";\r\n\r\nclass ListGroupToggleMetersCardsOrChart extends Component {\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ListGroup horizontal>\r\n\t\t\t\t<ListGroup.Item action value={metersView[0]} active={cfg.viewIdx === 0} disabled={this.props.disabled}\r\n\t\t\t\t\t\t\t\tonClick={this.onClick} >\r\n\t\t\t\t\t{metersView[0]}\r\n\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t<ListGroup.Item action value={metersView[1]} active={cfg.viewIdx === 1} disabled={this.props.disabled}\r\n\t\t\t\t\t\t\t\tonClick={this.onClick} >\r\n\t\t\t\t\t{metersView[1]}\r\n\t\t\t\t</ListGroup.Item>\r\n\t\t\t </ListGroup>\r\n\t\t)\r\n\t}\r\n\tonClick(e) {\r\n\t\tlet i = metersView.indexOf(e.currentTarget.value);\r\n\t\tif (i !== cfg.viewIdx) {\r\n\t\t\tif (i >= metersView.length)\r\n\t\t\t\talert(\"Error in component ListGroupToggleMetersCarsOrChart: error selected value \" + e.currentTarget.value)\r\n\t\t\telse {\r\n\t\t\t\tcfg.viewIdx = i;\r\n\t\t\t\tthis.forceUpdate();\r\n\t\t\t\tif (this.props.onChanged === undefined)\r\n\t\t\t\t\talert(\"Error in component ListGroupToggleMetersCarsOrChart: undefined callback function onChanged\")\r\n\t\t\t\telse\t\t\t\t\r\n\t\t\t\t\tthis.props.onChanged(e);\r\n\t\t\t};\r\n\t\t};\r\n\t}\r\n}\r\nexport default ListGroupToggleMetersCardsOrChart;","import React, { Component } from \"react\";\r\nimport Dropdown from \"react-bootstrap/Dropdown\";\r\nimport DropdownButton from 'react-bootstrap/DropdownButton';\r\nimport {cfg, sortKinds} from \"./Cfg.js\";\r\n//const uuidv4 = require('uuid');\r\n\r\nclass DropDownSort extends Component {\r\n    constructor(props) { // onChanged, disabled\r\n\t\tsuper(props);\r\n\t\tthis.onSelect = this.onSelect.bind(this);\r\n\t}\r\n\trender() {\r\n\t\tlet caption = \"Sort: \" + sortKinds[cfg.sortKindIdx];\r\n\t\tlet onItemClick = this.onSelect;\r\n\t\treturn (\r\n\t\t\t<DropdownButton title={caption} variant=\"secondary\" menuVariant=\"dark\" \r\n\t\t\t\t\t\t\tclassName=\"d-grid gap-2\"\r\n\t\t\t\t\t\t\tdisabled={this.props.disabled} >\r\n\t\t\t\t{sortKinds.map(function(sort) {\r\n\t\t\t\t\tvar active = (sort === sortKinds[cfg.sortKindIdx]);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Dropdown.Item key={sort} eventKey={sort} active={active} onClick={onItemClick}>\r\n\t\t\t\t\t\t\t{sort}  \r\n\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n    \t\t</DropdownButton>\r\n\t\t)\r\n\t}\r\n/*\r\n\t\t\t<Dropdown onSelect={this.onSelect} disabled={this.props.disabled} drop=\"down\" className=\"d-grid gap-2\">\r\n\t\t\t\t<Dropdown.Toggle variant=\"secondary\">\r\n\t\t\t\t\t{caption}\r\n\t\t\t\t</Dropdown.Toggle>\r\n\t\t\t\t<Dropdown.Menu variant=\"dark\">\r\n\t\t\t\t\t{sortKinds.map(function(sort) {\r\n\t\t\t\t\t\tvar active = (sort === sortKinds[cfg.sortKindIdx]);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Dropdown.Item key={sort} eventKey={sort} active={active}>\r\n\t\t\t\t\t\t\t\t{sort}\r\n\t\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Dropdown.Menu>\r\n\t\t\t</Dropdown>\r\n*/\r\n\tonSelect(e) {\r\n\t\tlet item = e.target.text;\r\n\t\tif (item !== sortKinds[cfg.sortKindIdx]) {\r\n\t\t\tlet newIdx = sortKinds.indexOf(item);\r\n\t\t\tif (newIdx < 0)\r\n\t\t\t\talert(\"Error in component DropDownSort: error selected value \" + e)\r\n\t\t\telse {\r\n\t\t\t\tcfg.sortKindIdx = newIdx;\r\n\t\t\t\tthis.forceUpdate();\r\n\t\t\t\tif (this.props.onChanged === undefined)\r\n\t\t\t\t\talert(\"Error in component DropDownSort: undefined callback function onChanged\")\r\n\t\t\t\telse\t\t\t\t\r\n\t\t\t\t\tthis.props.onChanged(item);\r\n\t\t\t};\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport default React.memo(DropDownSort);","import React, { Component } from \"react\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport {cfg} from \"./Cfg.js\";\r\n\r\nclass RadioSortDir extends Component {\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onChange = this.onChange.bind(this);\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Form>\r\n\t\t\t    <Form.Check \r\n\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\tlabel=\"ascending\"\r\n\t\t\t\t\tid=\"ascending\"\r\n\t\t\t\t\tvalue=\"ascending\"\r\n\t\t\t\t\tchecked={cfg.sortAsc}\r\n\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\tdisabled={this.props.disabled}\r\n\t\t\t\t/>\r\n\t\t\t\t<Form.Check\r\n\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\tlabel=\"descending\"\r\n\t\t\t\t\tid=\"descending\"\r\n\t\t\t\t\tvalue=\"descending\"\r\n\t\t\t\t\tchecked={!cfg.sortAsc}\r\n\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\tdisabled={this.props.disabled}\r\n\t\t\t\t/>\r\n\t\t\t</Form>\r\n\t\t);\r\n\t}\r\n\tonChange(e) {\r\n\t\tcfg.sortAsc = (e.currentTarget.value === \"ascending\");\r\n\t\tthis.forceUpdate();\r\n\t\tif (this.props.onChanged === undefined)\r\n\t\t\talert(\"Error in component RadioSortDir: undefined callback function onChanged\")\r\n\t\telse\t\t\t\t\r\n\t\t\tthis.props.onChanged(e);\r\n\t}\r\n}\r\n\r\nexport default React.memo(RadioSortDir);","import React, { Component } from \"react\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport {cfg} from \"./Cfg.js\";\r\n\r\nclass EditFilter extends Component {\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.onChange = this.onChange.bind(this);\r\n\t}\r\n\trender() {\r\n\t\tvar value = cfg.filter;// this.props.value;\r\n\t\treturn (\r\n\t\t\t<Form >\r\n\t\t\t\t<FormControl\r\n\t\t\t\t\ttype=\"search\"\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tplaceholder={\"filter: \" + cfg.prefixMeterIdx.short + \"#\"}\r\n\t\t\t\t\tclassName=\"me-2\"\r\n\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\tdisabled={this.props.disabled}\r\n\t\t\t\t/>\r\n\t\t\t</Form>\r\n\t\t);\r\n\t}\r\n\tonChange(e) {\r\n\t\tthis.forceUpdate();\r\n\t\tif (this.props.onChanged === undefined)\r\n\t\t\talert(\"Error in component EditFilter: undefined callback function onChanged\")\r\n\t\telse\t\r\n\t\t\tthis.props.onChanged(e.currentTarget.value);\r\n\t}\r\n}\r\n\r\nexport default EditFilter;","import React from \"react\";\r\nimport Dropdown from 'react-bootstrap/Dropdown';\r\nimport DropdownButton from 'react-bootstrap/DropdownButton';\r\nimport {cfg, tileSizesArr} from \"./Cfg.js\";\r\n\r\nfunction DropDownSize(props)  { // onChanged, disabled\r\n\tconst [sizeIdx, setSizeIdx] = React.useState(cfg.sizes.widthIdx);\r\n\r\n\tfunction onSelect(e) {\r\n\t\tlet item = e.target.text;\r\n\t\tif (item !== tileSizesArr[cfg.sizeTileIdx]) {\r\n\t\t\tlet newIdx = tileSizesArr.indexOf(item);\r\n\t\t\tif (newIdx < 0)\r\n\t\t\t\talert(\"Error in component DropDownSize: error selected value \" + e)\r\n\t\t\telse {\r\n\t\t\t\tif (props.onChanged === undefined)\r\n\t\t\t\t\talert(\"Error in component DropDownSize: undefined callback function onChanged\")\r\n\t\t\t\telse {\t\t\t\r\n\t\t\t\t\tprops.onChanged(newIdx);\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t};\r\n\t}\r\n    \r\n\tfunction sizesChanged(sizeIdxMax, doChange = false) {\r\n\t\tsetSizeIdx(sizeIdxMax);\r\n\t\tif (sizeIdx > sizeIdxMax || doChange) {\r\n\t\t\tprops.onChanged(sizeIdxMax);\r\n\t\t}\r\n\t}\r\n\tcfg.sizes.onWidthIdxChanged = sizesChanged;\r\n\r\n\tlet caption = \"Card Size: \" + tileSizesArr[cfg.sizeTileIdx];\r\n\tlet disabled = (cfg.viewIdx !== 0);\r\n\treturn (\r\n\t\t<DropdownButton title={caption} variant=\"secondary\" menuVariant=\"dark\" \r\n\t\t\t\t\t\tclassName=\"d-grid gap-2\"\r\n\t\t\t\t\t\tdisabled={props.disabled || disabled} >\r\n\t\t\t{tileSizesArr.map(function(size, idx) {\r\n\t\t\t\tvar active = (size === tileSizesArr[cfg.sizeTileIdx]);\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Dropdown.Item \tkey={size} eventKey={size} active={active} \r\n\t\t\t\t\t\t\t\t\tdisabled={idx > cfg.sizes.widthIdx}\r\n\t\t\t\t\t\t\t\t\tonClick={onSelect}>\r\n\t\t\t\t\t\t{size}\r\n\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</DropdownButton>\r\n\t)\r\n}\r\n\r\n//export default React.memo(DropDownSize);\r\nexport default DropDownSize;","import React from \"react\";\r\nimport DropDownMonth from './DropDownMonth.js';\r\nimport ListGroupToggleMetersCardsOrChart from './ListGroupToggleMetersCardsOrChart.js';\r\nimport DropDownSort from './DropDownSort.js';\r\nimport RadioSortDir from './RadioSortDir.js';\r\nimport EditFilter from './EditFilter.js';\r\nimport DropDownSize from './DropDownSize.js';\r\nimport { Button } from \"react-bootstrap\";\r\nimport { cfg } from \"./Cfg.js\";\r\nimport { data } from \"./Data.js\";\r\n\r\nfunction Instruments(props) { //onDataChanged, onViewChanged, onSortChanged, onFilterChanged, onSizeChanged, disabled\r\n\tfunction onShowObjectInfo() {\r\n\t\tif (props.onObjectInfo) {\r\n\t\t\tprops.onObjectInfo(data.objects.indexOf(cfg.currentObj));\r\n\t\t}\r\n\t}\r\n\tfunction onMetersDataChanged(month) {\r\n\t\tif (props.onDataChanged) {\r\n\t\t\tprops.onDataChanged();\r\n\t\t}\r\n\t}\r\n\tfunction onMetersViewChanged(sort) {\r\n\t\tif (props.onViewChanged) {\r\n\t\t\tprops.onViewChanged();\r\n\t\t}\r\n\t}\r\n\tfunction onMetersSortChanged(sort) {\r\n\t\tif (props.onSortChanged) {\r\n\t\t\tprops.onSortChanged();\r\n\t\t}\r\n\t}\r\n\tfunction onMetersFilterChanged(filter) {\r\n\t\tif (props.onFilterChanged) {\r\n\t\t\tprops.onFilterChanged(filter);\r\n\t\t}\r\n\t}\r\n\tfunction onMetersSizeChanged(sizeIdx) {\r\n\t\tif (props.onSizeChanged) {\r\n\t\t\tprops.onSizeChanged(sizeIdx);\r\n\t\t}\r\n\t}\r\n\treturn(\r\n\t\t<>\r\n\t\t<div className=\"instrument d-grid\" >\r\n\t\t\t<Button onClick={onShowObjectInfo} disabled={props.disabled}>\r\n\t\t\t\tObject Info\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t\t<div className=\"instrument-title\" >\r\n\t\t\t<h5>data interval</h5>\r\n\t\t</div>\r\n\t\t<div className=\"instrument\" >\r\n\t\t\t<DropDownMonth onChanged={onMetersDataChanged} disabled={props.disabled} />\r\n\t\t</div>\r\n\t\t<div className=\"instrument-title\" >\r\n\t\t\t<h5>data presentation</h5>\r\n\t\t</div>\r\n\t\t<div className=\"instrument\" >\r\n\t\t\t<DropDownSort onChanged={onMetersSortChanged} disabled={props.disabled}/>\r\n\t\t</div>\r\n\t\t<div className=\"instrument instrument-idented\">\r\n\t\t\t<RadioSortDir onChanged={onMetersSortChanged} disabled={props.disabled}/>\r\n\t\t</div>\r\n\t\t<div className=\"instrument\" >\r\n\t\t\t<EditFilter onChanged={onMetersFilterChanged} value={props.filter} disabled={props.disabled}/>\r\n\t\t</div>\r\n\t\t<div className=\"instrument-title\" >\r\n\t\t\t<h5>view settings</h5>\r\n\t\t</div>\r\n\t\t<div className=\"instrument\" >\r\n\t\t\t<ListGroupToggleMetersCardsOrChart onChanged={onMetersViewChanged} disabled={props.disabled}/>\r\n\t\t</div>\r\n\t\t<div className=\"instrument\" >\r\n\t\t\t<DropDownSize onChanged={onMetersSizeChanged} disabled={props.disabled}/>\r\n\t\t</div>\r\n\t\t</>\r\n\t)\r\n\r\n}\r\n\t\t\t\r\n//export default Instruments;\r\nexport default React.memo(Instruments)\r\n","import './LlMap.css';\nimport React from \"react\";\n//import {useState, useEffect} from \"react\";\nimport { MapContainer, TileLayer, Marker, Tooltip, useMapEvents, useMap } from 'react-leaflet';//useMap, \nimport * as L from \"leaflet\";\nimport { data } from \"./Data.js\";\nimport { cfg } from \"./Cfg.js\";\n//import img from \"./marker.png\"; метод использования картинки\n\nconst tl = 0, tc=1, tr=2, cr=3, br=4, bc=5, bl=6, cl=7;\nexport const mapWnd = {\n\tbnd: null,\n\tcounts: [],//{tl: 0, tc: 0, tr: 0, cl: 0, cr: 0, bl: 0, bc: 0, br: 0},\n\tcountsChanged: true,\n\toutOf: function(coord) {\n\t\tif (this.bnd)\n\t\t\treturn \tcoord.lon > this.bnd._northEast.lng || coord.lat > this.bnd._northEast.lat || \n\t\t\t\t\tcoord.lon < this.bnd._southWest.lng || coord.lat < this.bnd._southWest.lat\n\t\telse \n\t\t\treturn true;\n\t},\n\tlonLess: function(coord) {\n\t\tif (this.bnd)\n\t\t\treturn coord.lon < this.bnd._southWest.lng\n\t\telse\t\n\t\t\treturn false;\n\t},\n\tlonMore: function(coord) {\n\t\tif (this.bnd)\n\t\t\treturn coord.lon > this.bnd._northEast.lng\n\t\telse\t\n\t\t\treturn false;\n\t},\n\tlatLess: function(coord) {\n\t\tif (this.bnd)\n\t\t\treturn coord.lat < this.bnd._southWest.lat\n\t\telse\t\n\t\t\treturn false;\n\t},\n\tlatMore: function(coord) {\n\t\tif (this.bnd)\n\t\t\treturn coord.lat > this.bnd._northEast.lat\n\t\telse\t\n\t\t\treturn false;\n\t},\n};\nObject.defineProperty(mapWnd, \"bounds\", {\n\tset: function (value) {\n\t\tthis.bnd = value;\n\t\tlet counts = [0, 0, 0, 0, 0, 0, 0, 0];//{tl: 0, tc: 0, tr: 0, cl: 0, cr: 0, bl: 0, bc: 0, br: 0};\n\t\tdata.objects.forEach( (object, index, array) => {\n\t\t\tif( mapWnd.lonLess(object.coord) && mapWnd.latMore(object.coord) ) \n\t\t\t\tcounts[tl]++;\n\t\t\tif( !mapWnd.lonLess(object.coord) && !mapWnd.lonMore(object.coord) && mapWnd.latMore(object.coord) ) \n\t\t\t\tcounts[tc]++;\n\t\t\tif( mapWnd.lonMore(object.coord) && mapWnd.latMore(object.coord) ) \n\t\t\t\tcounts[tr]++;\n\t\t\tif( !mapWnd.latLess(object.coord) && !mapWnd.latMore(object.coord) && mapWnd.lonLess(object.coord) ) \n\t\t\t\tcounts[cl]++;\n\t\t\tif( !mapWnd.latLess(object.coord) && !mapWnd.latMore(object.coord) && mapWnd.lonMore(object.coord) ) \n\t\t\t\tcounts[cr]++;\n\t\t\tif( mapWnd.lonLess(object.coord) && mapWnd.latLess(object.coord) ) \n\t\t\t\tcounts[bl]++;\n\t\t\tif( !mapWnd.lonLess(object.coord) && !mapWnd.lonMore(object.coord) && mapWnd.latLess(object.coord) ) \n\t\t\t\tcounts[bc]++;\n\t\t\tif( mapWnd.lonMore(object.coord) && mapWnd.latLess(object.coord) ) \n\t\t\t\tcounts[br]++;\n\t\t\t}\n\t\t);\n\t\tthis.countsChanged = \n\t\t\tundefined !== counts.find(\t(value, index, arr)=>\t{\n\t\t\t\t\t\t\t\t\t\treturn value !== mapWnd.counts[index]\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t);\n\t\tif (this.countsChanged)\n\t\t\tthis.counts = counts;\n\t}\n});\n//const [position, setPosition] = useState(null);\n\nfunction MapEvents(props) {\n    const map = useMapEvents({\n\t\t//resize() { mapWnd.bounds = map.getBounds(); props.onMapEvent() },\n        moveend() { mapWnd.bounds = map.getBounds(); cfg.mapSave(map); props.onMapEvent() },\n        //zoomend() { mapWnd.bounds = map.getBounds(); props.onMapEvent() }\n\t});\n    return null;\n}\n\nfunction MapBounds() {\n\tconst map = useMap();\n\tReact.useEffect(() => {\n\t\tmapWnd.bounds = map.getBounds();\n\t\tcfg.mapSave(map);\n\t}, []);\n\treturn null;\n}\n\nfunction CenterMarker(props) {\n\tconst map = useMap();\n\tif (cfg.currentObject && !props.tooltips) {\n\t\tif (mapWnd.outOf(cfg.currentObject.coord)) {\n\t\t\tcfg.map.lon = cfg.currentObject.coord.lon;\n\t\t\tcfg.map.lat = cfg.currentObject.coord.lat;\n\t\t\tmap.flyTo([cfg.map.lat, cfg.map.lon], map.getZoom());\n\t\t}\n\t};\n\treturn null;\n}\nfunction CounterTL(props) {\n\treturn (\n\t\t<div className=\"marker-counter\" style={{top: \"0\", left: \"0\", position: \"absolute\"}}\t> \n\t\t\t{props.value ? props.value.toString() : \"\"} \n\t\t</div>\n\t)\n}\nfunction CounterBL(props) {\n\treturn (\n\t\t<div \tclassName=\"marker-counter\" style={{bottom: \"0\", left: \"0\", position: \"absolute\"}} >\n\t\t\t{props.value ? props.value.toString() : \"\"} \n\t\t</div>\n\t)\n}\nfunction CounterTR(props) {\n\treturn (\n\t\t<div \tclassName=\"marker-counter\" style={{top: \"0\", right: \"0\", position: \"absolute\"}}\t>\n\t\t\t{props.value ? props.value.toString() : \"\"} \n\t\t</div>\n\t)\n}\nfunction CounterBR(props) {\n\treturn (\n\t\t<div \tclassName=\"marker-counter\" style={{bottom: \"0\", right: \"0\", position: \"absolute\"}} >\n\t\t\t{props.value ? props.value.toString() : \"\"} \n\t\t</div>\n\t)\n}\nfunction CounterCL(props) {\n\treturn (\n\t\t<div \tclassName=\"marker-counter\" style={{top: \"50%\", transform: \"translateY(-50%)\", left: \"0\", position: \"absolute\"}}\t>\n\t\t\t{props.value ? props.value.toString() : \"\"} \n\t\t</div>\n\t)\n}\nfunction CounterCR(props) {\n\treturn (\n\t\t<div \tclassName=\"marker-counter\" style={{top: \"50%\", transform: \"translateY(-50%)\", right: \"0\", position: \"absolute\"}} >\n\t\t\t{props.value ? props.value.toString() : \"\"} \n\t\t</div>\n\t)\n}\nfunction CounterTC(props) {\n\treturn (\n\t\t<div \tclassName=\"marker-counter\" style={{left: \"50%\", transform: \"translateX(-50%)\", top: \"0\", position: \"absolute\"}}\t>\n\t\t\t{props.value ? props.value.toString() : \"\"} \n\t\t</div>\n\t)\n}\nfunction CounterBC(props) {\n\treturn (\n\t\t<div \tclassName=\"marker-counter\" style={{left: \"50%\", transform: \"translateX(-50%)\", bottom: \"0\", position: \"absolute\"}} >\n\t\t\t{props.value ? props.value.toString() : \"\"} \n\t\t</div>\n\t)\n}\n\nexport function MarkerCounters(props) {\n\treturn (\n\t\t<>\n\t\t<CounterTL value={props.values[tl]} />\n\t\t<CounterBL value={props.values[bl]} />\n\t\t<CounterTR value={props.values[tr]} />\n\t\t<CounterBR value={props.values[br]} />\n\t\t<CounterCL value={props.values[cl]} />\n\t\t<CounterCR value={props.values[cr]} />\n\t\t<CounterBC value={props.values[bc]} />\n\t\t<CounterTC value={props.values[tc]} />\n\t\t</>\n\t)\n}\nfunction MapPlaceholder() {\n  return (\n    <p>\n\t\tMap of Objects.{' '}\n\t\t<noscript>You need to enable JavaScript to see this map.</noscript>\n    </p>\n  )\n}\nconst refMarkers = {current: []}; // pseudo hook effect\nexport function showTooltip(idx) {\n\tif (idx >=0 && idx < refMarkers.current.length) {\n\t\tif (refMarkers.current[idx].current) {\n\t\t\tif (!refMarkers.current[idx].current.isTooltipOpen()) \n\t\t\t\trefMarkers.current[idx].current.toggleTooltip();\n\t\t} \n\t}\n}\nexport function hideTooltip(idx) {\n\tif (idx >=0 && idx < refMarkers.current.length)\n\t\tif (refMarkers.current[idx].current) {\n\t\t\tif (refMarkers.current[idx].current.isTooltipOpen())\n\t\t\t\trefMarkers.current[idx].current.toggleTooltip();\n\t} \n}\n\nfunction LlMap(props) {\n\tconst LeafIcon = L.Icon.extend({\n\t\toptions: {}\n\t});\n\tconst blueIcon = new LeafIcon({\n\t    iconUrl: process.env.PUBLIC_URL + '/img/marker-blue.png',//\"https://github.com/pointhi/leaflet-color-markers/blob/master/img/marker-icon-blue.png?raw=true\"\n\t\tshadowUrl: process.env.PUBLIC_URL + '/img/marker-shadow.png',\n\t\ticonAnchor: [12, 40]\n    });\n    const grayIcon = new LeafIcon({\n\t    iconUrl: process.env.PUBLIC_URL + '/img/marker-yellow.png',\n\t\tshadowUrl: process.env.PUBLIC_URL + '/img/marker-shadow.png',\n\t\ticonAnchor: [12, 40]\n    });\n\t//const [icon, setIcon] = useState(grayIcon);\n\tfunction clickMarker(object) {\n\t\tselectMarker(object);\n\t};\n\t\n\tconst [state, setState] = React.useState({});\n\tfunction mapEvent() {\n\t\tif (mapWnd.countsChanged)\n\t\t\tsetState( {state} );\n\t};\n\t\n\tconst refMap = React.useRef(); // not used - just for trick\n\t//const refMarkers = React.useRef([]);\n\tif (refMarkers.current.length !== data.objects.length) {\n        refMarkers.current = data.objects.map((_, i) => refMarkers.current[i] || React.createRef());\n    }\n\tfunction focusMarker(icon) {\n\t\tlet marker = refMarkers.current.find( (mrk) => \n\t\t\t{return mrk.current._icon === icon.currentTarget} );\n\t\tif (marker)\n\t\t\tif (!marker.current.isTooltipOpen())\n\t\t\t\tmarker.current.toggleTooltip();\n\t};\n\tfunction unfocusMarker(icon) {\n\t\tlet marker = refMarkers.current.find( (mrk) => \n\t\t\t{return mrk.current._icon === icon.currentTarget} );\n\t\tif (marker && refMarkers.current.indexOf(marker) !== data.objects.indexOf(cfg.currentObject))\n\t\t\tif (marker.current.isTooltipOpen())\n\t\t\t\tmarker.current.toggleTooltip();\n\t};\n\n\tconst nObjects = React.useRef(0);\n\tReact.useEffect(\t() => {\n\t\tif (nObjects.current !== data.objects.length) {\n\t\t\t//refMap.current.target._events.moveend[3].fn(); не красиво\n\t\t\tnObjects.current = data.objects.length;\n\t\t\tsetState( {state} );\n\t\t};\n\t\trefMarkers.current.forEach( \n\t\t\t(refMarker) => {\n\t\t\t\tif (refMarker.current) {\n\t\t\t\t\trefMarker.current._icon.addEventListener(\"focus\", focusMarker); \n\t\t\t\t\trefMarker.current._icon.addEventListener(\"blur\", unfocusMarker); \n\t\t\t\t};\n\t\t\t} \n\t\t);\n\t\treturn function unmount() {\n\t\t\trefMarkers.current.forEach( \n\t\t\t\t(refMarker) => {\n\t\t\t\t\tif (refMarker.current) {\n\t\t\t\t\t\tif (refMarker.current._icon) {\n\t\t\t\t\t\t\trefMarker.current._icon.removeEventListener(\"focus\", focusMarker); \n\t\t\t\t\t\t\trefMarker.current._icon.removeEventListener(\"blur\", unfocusMarker); \n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} \n\t\t\t)\n\t\t}\n\t} );\n\tfunction keypressMarker(e, object) {\n\t\tif (e.originalEvent.code === \"Space\" || e.originalEvent.code === \"Enter\") \n\t\t\tselectMarker(object);\n\t};\n\tfunction selectMarker(object) {\n\t\tif (cfg.currentObject !== object) {\n\t\t\tcfg.currentObject = object;\n\t\t\tif (props.onChanged)\n\t\t\t\tprops.onChanged(object)\n\t\t\telse\n\t\t\t\talert(\"Error in component LlMap: undefined callback function onChanged\");\n\t\t}\n\t};\n\t\n\tlet mapCfg = cfg.mapLoad();\n\treturn (\n\t\t<>\n\t\t<MapContainer \tcenter={[mapCfg.lat, mapCfg.lng]} zoom={mapCfg.zoom} scrollWheelZoom={false}\n\t\t\t\t\t\tstyle={{width: \"100%\", height: \"100%\"}} \n\t\t\t\t\t\twhenReady={mapInstance => { refMap.current = mapInstance } } placeholder={<MapPlaceholder/>}\n\t\t\t\t\t\t>\n\t\t\t<TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\n\t\t\t{data.objects.map( function(object, index) {\n\t\t\t\tlet lon = object.coord.lon;\n\t\t\t\tlet lat = object.coord.lat;\n\t\t\t\tlet cur = object === cfg.currentObject;\n\t\t\t\tlet dir = cur ? \"bottom\" : \"top\";\n\t\t\t\tlet per = cur ? true : false;\n\t\t\t\tlet ofs = cur ? [0, 0] : [0, -40];\n\t\t\t\tlet opy = cur ? 0.7 : 1.0;\n\t\t\t\tlet icon = cur ? blueIcon : grayIcon;\n\t\t\t\tlet zdx = cur ? 1000 : 0;\n\t\t\t\t//var refMarker = React.createRef();\n\t\t\t\t//refMarkers.push(refMarker);\n\t\t\t\tif (props.tooltips) {\n\t\t\t\t\treturn(\n\t\t\t\t\t\t<Marker position={[lat, lon]} key={index} icon={icon} zIndexOffset={zdx} ref={refMarkers.current[index]}\n\t\t\t\t\t\t\t\teventHandlers={{click: (e) => clickMarker(object), \n\t\t\t\t\t\t\t\t\t\t\t\tkeypress: (e) => keypressMarker(e, object)}} \n\t\t\t\t\t\t\t\tautoPanOnFocus>\n\t\t\t\t\t\t\t{cur && \n\t\t\t\t\t\t\t\t<Tooltip direction={dir} offset={ofs} opacity={opy} permanent={per}>\n\t\t\t\t\t\t\t\t\t{object.name}\n\t\t\t\t\t\t\t</Tooltip>}\n\t\t\t\t\t\t\t{!cur && \n\t\t\t\t\t\t\t\t<Tooltip direction={dir} offset={ofs} opacity={opy} permanent={per}>\n\t\t\t\t\t\t\t\t\t{object.name} <br/> {object.address} <br/> meters: {object.metersCount}\n\t\t\t\t\t\t\t</Tooltip>}\n\t\t\t\t\t\t</Marker>\n\t\t\t\t)} else {\n\t\t\t\t\treturn(\n\t\t\t\t\t\t<Marker position={[lat, lon]} key={index} icon={icon}/>\n\t\t\t\t)};\t\n\t\t\t})}\n\t\t\t{data.objects.length > 0 &&\n\t\t\t\t<MapBounds/>\n\t\t\t}\n\t\t\t<MapEvents onMapEvent={mapEvent}/>\n\t\t\t<CenterMarker tooltips={props.tooltips}/>\n\t\t</MapContainer>\n\t\t<MarkerCounters values={mapWnd.counts}/>\n\t\t</>\n\t); //\n}\n\nexport default React.memo(LlMap)\n/*\n\tconst [map, setMap] = useState(null);\n\n\t\tuseEffect(\t() => {\n\t\t\t\t\t\tdebugger;\n\t\t\t\t\t\tif (!map) return;\n\t\t\t\t\t\t//console.log(map.getBounds());\n\t\t\t\t\t\tmap.on(\"zoomend\", \t()=>{console.log(map.getBounds())});\n\t\t\t\t\t}, [map]);\n\t\t\t\t\t\n*/","import React from 'react';\nimport {useEffect} from \"react\";\nimport './ObjectList.css';\nimport ListGroup from \"react-bootstrap/ListGroup\";\nimport Dropdown from \"react-bootstrap/DropDown\";\nimport {data} from \"./Data.js\";\nimport {cfg} from \"./Cfg.js\";\nimport {mapWnd, showTooltip, hideTooltip} from \"./LlMap.js\";\n\nfunction ObjectList(props) { // onChanged, onSelectTab, showObjectInfo\n\t// eslint-disable-next-line\n\tconst [ignored, forceUpdate] = React.useReducer(x => x + 1, 0);\n\n\tfunction clickObject(object) {\n\t\tif (cfg.currentObject !== object || mapWnd.outOf(cfg.currentObject.coord)) {\n\t\t\tif (props.onChanged) {\n\t\t\t\t//setSelectedObj(object);\n\t\t\t\tcfg.currentObject = object;\n\t\t\t\tforceUpdate();\n\t\t\t\tprops.onChanged(object)\n\t\t\t} else {\n\t\t\t\talert(\"Error in component ObjectList: undefined callback function onChanged\");\n\t\t\t}\n\t\t}\n\t};\n\t// for tabbing and hinting\n\tconst refItems = React.useRef([]);\n\tif (refItems.current.length !== data.objects.length) {\n        refItems.current = data.objects.map((_, i) => refItems.current[i] || React.createRef());\n    }\n\t/*function getIdxByEvent(e) {\n\t\tlet item = refItems.current.find( (itm) => \n\t\t\t\t{return itm.current === e.target} );\n\t\treturn item ? refItems.current.indexOf(item) : -1;\n\t};*/\n\tfunction hintMarker(e) {\n\t\tlet idx = Number(e.target.value);//getIdxByEvent(e);\n\t\tif (idx >= 0 && data.objects[idx] !== cfg.currentObject)\n\t\t\tshowTooltip(idx);\n\t};\n\tfunction unhintMarker(e) { \n\t\tlet idx =  Number(e.target.value);//getIdxByEvent(e);\n\t\tif (idx >= 0 && data.objects[idx] !== cfg.currentObject)\n\t\t\thideTooltip(idx);\n\t};\n\tfunction dlgObjectInfo(e) {\n\t\te.preventDefault();\n\t\tlet idx =  Number(e.target.value);//getIdxByEvent(e);\n\t\tif (props.showObjectInfo)\n\t\t\tprops.showObjectInfo(idx)\n\t\telse \n\t\t\talert(\"Error in component ObjectList: undefined callback function showObjectInfo\");\n\t};\n\tfunction clkObjectInfo(obj) {\n\t\tlet idx = data.objects.indexOf(obj);\n\t\tif (idx >= 0) {\n\t\t\tif (props.showObjectInfo)\n\t\t\t\tprops.showObjectInfo(idx)\n\t\t\telse \n\t\t\t\talert(\"Error in component ObjectList: undefined callback function showObjectInfo\");\n\t\t};\n\t};\n\n\t//let activeRef = useRef(null);\n\t\n\tlet activeIdx = -1;\n\tuseEffect(\t() => \t{\n\t\t\t//var r = null, x, y; \n\t\t\tif (cfg.currentObject)\n\t\t\t\tactiveIdx = data.objects.indexOf(cfg.currentObject);\n\t\t\tif (activeIdx >= 0) \n\t\t\t\trefItems.current[activeIdx].current.scrollIntoView({behavior: 'smooth', block: 'nearest'});\n\t\t\t/*let e = window.event, mouse = null;\n\t\t\tif (e.pageX && e.pageY) {\n\t\t\t\tmouse = {x: e.pageX, y: e.pageY};\n\t\t\t};*/\n\t\t\trefItems.current.forEach( \n\t\t\t\t(refItem, idx) => {\n\t\t\t\t\tif (refItem.current) {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\tr = refItem.current.getBoundingClientRect();\n\t\t\t\t\t\tif (mouse) {\n\t\t\t\t\t\t\tif (mouse.x >= r.left && mouse.x <= r.right && mouse.y >= r.top && mouse.y <= r.bottom) {\n\t\t\t\t\t\t\t\tshowTooltip(idx);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t*/\n\t\t\t\t\t\trefItem.current.addEventListener(\"focus\", hintMarker, true); \n\t\t\t\t\t\trefItem.current.addEventListener(\"mousemove\", hintMarker, true); \n\t\t\t\t\t\trefItem.current.addEventListener(\"blur\", unhintMarker, true); \n\t\t\t\t\t\trefItem.current.addEventListener(\"mouseenter\", hintMarker, true); \n\t\t\t\t\t\trefItem.current.addEventListener(\"mouseleave\", unhintMarker, true);\n\t\t\t\t\t\trefItem.current.addEventListener(\"dblclick\", dlgObjectInfo, true);\n\t\t\t\t\t};\n\t\t\t\t} \n\t\t\t);\n\t\t\treturn function unmount() {\n\t\t\t\trefItems.current.forEach( \n\t\t\t\t\t(refItem) => {\n\t\t\t\t\t\tif (refItem.current) {\n\t\t\t\t\t\t\trefItem.current.removeEventListener(\"focus\", hintMarker, true); \n\t\t\t\t\t\t\trefItem.current.removeEventListener(\"mousemove\", hintMarker, true); \n\t\t\t\t\t\t\trefItem.current.removeEventListener(\"blur\", unhintMarker, true); \n\t\t\t\t\t\t\trefItem.current.removeEventListener(\"mouseenter\", hintMarker, true); \n\t\t\t\t\t\t\trefItem.current.removeEventListener(\"mouseleave\", unhintMarker, true); \n\t\t\t\t\t\t\trefItem.current.removeEventListener(\"dblclick\", dlgObjectInfo, true);\n\t\t\t\t\t\t};\n\t\t\t\t\t} \n\t\t\t\t)\n\t\t\t};\n\t\t}//,\t[cfg.currentObject]\n\t);\n\t\n\treturn (\n\t\t<ListGroup as=\"dl\" style={{minWidth: \"-webkit-fill-available\"}}>\n\t\t\t{\n\t\t\t\tdata.objects.map( (obj, idx, arr) => {\n\t\t\t\t\tlet className, hint;\n\t\t\t\t\tlet active = (obj === cfg.currentObject);//(obj === selectedObj);\n\t\t\t\t\t//let ref = null;\n\t\t\t\t\tif (active) {\n\t\t\t\t\t\tclassName = \"object-list-item-active\";\n\t\t\t\t\t\thint = `meters: ${obj.metersCount}`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclassName = \"object-list-item\";\n\t\t\t\t\t\thint = \"\";\n\t\t\t\t\t\tif (obj.address)\n\t\t\t\t\t\t\thint += `${obj.address}`;\n\t\t\t\t\t\tif (obj.metersCount)\n\t\t\t\t\t\t\thint += `\\nmeters: ${obj.metersCount}`;\n\t\t\t\t\t};\n\t\t\t\t\tif (active) {\n\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t<div key={idx} className={className}>\n\t\t\t\t\t\t\t<ListGroup.Item as=\"div\" id={idx} className=\"object-list-item-button\"\n\t\t\t\t\t\t\t\t\tvalue={idx}\n\t\t\t\t\t\t\t\t\tactive={active}\n\t\t\t\t\t\t\t\t\ttitle={hint}\n\t\t\t\t\t\t\t\t\tonClick={ () => clickObject(obj) }\n\t\t\t\t\t\t\t\t\tref={refItems.current[idx]}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{obj.name}\n\t\t\t\t\t\t\t<Dropdown className=\"object-list-item-active-dropdown\">\n\t\t\t\t\t\t\t\t<Dropdown.Toggle variant=\"primary\" id=\"dropdown-split-basic\"/>\n\t\t\t\t\t\t\t\t\t<Dropdown.Menu className=\"dropdown-menu\">\n\t\t\t\t\t\t\t\t\t\t<Dropdown.Item onClick={() => clkObjectInfo(obj)}> object info </Dropdown.Item>\n\t\t\t\t\t\t\t\t\t\t<Dropdown.Item onClick={() => {cfg.currentTabIdx = 1; props.onSelectTab()}}> {\"meters: \" + obj.metersCount} </Dropdown.Item>\n\t\t\t\t\t\t\t\t\t</Dropdown.Menu>\n\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t</ListGroup.Item>\n\t\t\t\t\t\t\t{active &&\n\t\t\t\t\t\t\t\t<dd style={{textAlign: \"right\"}}>\n\t\t\t\t\t\t\t\t\t<sup> {obj.address} </sup>\n\t\t\t\t\t\t\t\t</dd> \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t<div key={idx} className={className}>\n\t\t\t\t\t\t\t<ListGroup.Item as=\"button\" id=\"object-list\" className=\"object-list-item-button\"\n\t\t\t\t\t\t\t\t\tvalue={idx}\n\t\t\t\t\t\t\t\t\tactive={active}\n\t\t\t\t\t\t\t\t\ttitle={hint}\n\t\t\t\t\t\t\t\t\tonClick={ () => clickObject(obj) }\n\t\t\t\t\t\t\t\t\tref={refItems.current[idx]}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{obj.name + \"   \"}\n\t\t\t\t\t\t\t</ListGroup.Item>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t\t}\n\t\t</ListGroup>\n\t)\n}\n\nexport default React.memo(ObjectList)\n//export default ObjectList\n","import React, { Component } from \"react\";\r\nimport Offcanvas from \"react-bootstrap/Offcanvas\";\r\nimport Instruments from './Instruments.js';\r\nimport ObjectList from './ObjectList.js';\r\nimport {cfg} from './Cfg.js';\r\n\r\nexport default class SlidePanel extends Component {\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {show: false};\r\n\t\tthis.onClose = this.onClose.bind(this);\r\n\t\tthis.onObjChanged = this.props.onObjChanged.bind(this);\r\n\t \tthis.showObjectInfo = this.props.showObjectInfo.bind(this);\r\n\t\tthis.onSelectTab = this.props.onSelectTab.bind(this);\r\n\t\tthis.onViewChanged = this.props.onViewChanged.bind(this);\r\n\t\tthis.onSortChanged = this.props.onSortChanged.bind(this);\r\n\t\tthis.onFilterChanged = this.props.onFilterChanged.bind(this);\r\n\t\tthis.onSizeChanged = this.props.onSizeChanged.bind(this);\r\n\t}\r\n\tshow() {\r\n\t\tthis.setState({show: true});\r\n\t}\r\n\tonClose(e) {\r\n\t\tthis.setState({show: false});\r\n\t}\r\n\trender() {\r\n\t\tlet show = this.state.show;\r\n\t\treturn(\r\n\t\t\t<Offcanvas id=\"slide-panel-left\" show={show} onHide={this.onClose}>\r\n\t\t\t\t<Offcanvas.Header closeButton>\r\n\t\t\t\t\t<Offcanvas.Title>\r\n\t\t\t\t\t\t{\t(cfg.currentTabIdx === 0) &&\r\n\t\t\t\t\t\t\t\"Object List\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{\t(cfg.currentTabIdx === 1) &&\r\n\t\t\t\t\t\t\t\"View Settings\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Offcanvas.Title>\r\n\t\t\t\t</Offcanvas.Header>\r\n\t\t\t\t<Offcanvas.Body\tstyle={{padding: \"0\"}}>\r\n\t\t\t\t\t{\t(show && cfg.currentTabIdx === 0) &&\r\n\t\t\t\t\t\t<ObjectList id=\"object-list\"\t\r\n\t\t\t\t\t\t\t\t\t\tonChanged={this.onObjChanged} \tshowObjectInfo={this.showObjectInfo}\r\n\t\t\t\t\t\t\t\t\t\tonSelectTab={this.onSelectTab}\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{\t(show && cfg.currentTabIdx === 1) &&\r\n\t\t\t\t\t\t<Instruments \tonSortChanged={this.onSortChanged} \t\tonSizeChanged={this.onSizeChanged}\r\n\t\t\t\t\t\t\t\t\t\tonViewChanged={this.onViewChanged}\t\tonObjectInfo={this.showObjectInfo}\r\n\t\t\t\t\t\t\t\t\t\tonFilterChanged={this.onFilterChanged} \tfilter={this.props.filter}\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Offcanvas.Body>\r\n\t\t\t</Offcanvas>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\n","import React from \"react\";\r\nimport Offcanvas from \"react-bootstrap/Offcanvas\";\r\nimport ListGroupToggleViewMapOrMeters from \"./ListGroupToggleViewMapOrMeters.js\";\r\nimport {cfg} from './Cfg.js';\r\nimport ButtonUser from \"./ButtonUser.js\";\r\n\r\nconst SlidePanelRight = React.forwardRef( (props, ref) => {\r\n\t\tconst [show, setShow] = React.useState(false);\r\n\r\n\t\tReact.useImperativeHandle(ref, () => (\r\n\t\t\t\t{ open: (value) => setShow(true) } \r\n\t\t\t)\r\n\t\t);\r\n\r\n\t\tfunction onClose(e) {\r\n\t\t\tsetShow(false);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Offcanvas id=\"slide-panel-right\" placement=\"end\" show={show} onHide={onClose}>\r\n\t\t\t\t<Offcanvas.Header closeButton>\r\n\t\t\t\t\t<Offcanvas.Title>\r\n\t\t\t\t\t\tMain Menu\r\n\t\t\t\t\t</Offcanvas.Title>\r\n\t\t\t\t</Offcanvas.Header>\r\n\t\t\t\t<Offcanvas.Body\tstyle={{padding: \"0\"}}>\r\n\t\t\t\t\t{show &&\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t<ListGroupToggleViewMapOrMeters onChanged={props.onSelectTab} currObj={cfg.currentObject} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={props.disabled}/>\r\n\t\t\t\t\t\t<div  \tstyle={{margin: \"1em\", marginLeft: \"auto\", marginRight: \"auto\", width: \"fit-content\"}}>\r\n\t\t\t\t\t\t\t<ButtonUser\tcaption=\"User's Info\"\ttitle=\"\"\tvariant=\"primary\" \r\n\t\t\t\t\t\t\t\t\t\tdisabled={props.disabled} \r\n\t\t\t\t\t\t\t\t\t\tonClick={props.showUserInfo}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Offcanvas.Body>\r\n\t\t\t</Offcanvas>\r\n\t\t)\r\n\t} \r\n)\r\n\r\nexport default React.memo( SlidePanelRight );\r\n//export default SlidePanelRight;\r\n\r\n\r\n","import './ModalUserAuth.css';\r\nimport React from 'react';\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport Col from 'react-bootstrap/Col';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Row from 'react-bootstrap/Row';\r\nimport {QuestionCircle} from \"react-bootstrap-icons\";\r\nimport {cfg} from './Cfg.js';\r\nimport {utils} from './Utils.js';\r\n\r\nconst \r\n    cLoginNotAuth = 0,\r\n    cLoginTimeout = 1,\r\n    cLoginConnecting = 2,\r\n    cLoginNotSpecified = 3,\r\n    cLoginSuccess = 4,\r\n    cLoginNotFound = 5,\r\n    cLoginSuccessAfter = 6;\r\n//-----------------------------------------------------------------------------------------------------------------\r\nconst UserAccountTitle = React.forwardRef( (props, ref) => {\r\n        const [state, setState] = React.useState( {title: cLoginNotAuth} );    \r\n\r\n        React.useImperativeHandle(ref, () => ({\r\n                setTitle: (value) => setState( {title: value} ),\r\n            })\r\n        );\r\n        \r\n        let strAccount = \"\";\r\n        let clrAccount = \"Black\";\r\n    \r\n        switch(state.title) {\r\n            case cLoginTimeout:\r\n                strAccount = \" needs to be reentered\";\r\n                clrAccount = \"DarkOrange\";\r\n                break;\r\n            case cLoginNotSpecified:\r\n                strAccount = \" not specified fully\";\r\n                clrAccount = \"Red\";\r\n                break;\r\n            case cLoginSuccess:\r\n            case cLoginSuccessAfter:\r\n                strAccount = \" authenticated successfully\";\r\n                clrAccount = \"SpringGreen\";\r\n                break;\r\n            case cLoginNotFound:\r\n                strAccount = \" not found\";\r\n                clrAccount = \"Red\";\r\n                break;\r\n            default:\r\n        }\r\n\r\n        return(\r\n            <p>\r\n                User's account <span style={{color: clrAccount}}>{strAccount}</span>\r\n            </p>\r\n        )    \r\n    }\r\n)\r\n//-----------------------------------------------------------------------------------------------------------------\r\nconst ButtonAbout = React.forwardRef( (props, ref) => {\r\n        const [state, setState] = React.useState( {active: true} );    \r\n\r\n        React.useImperativeHandle(ref, () => ({\r\n                setVisible: (value) => setState( {active: value} ),\r\n            })\r\n        );\r\n\r\n        //let caption = state.active ? \"?\" : \"\";\r\n        return(\r\n            <Button variant=\"light\" size=\"sm\" disabled={!state.active} onClick={props.onClick}\r\n                    title=\"about this application\"> \r\n                <h5><QuestionCircle hidden={!state.active}/></h5>\r\n            </Button>\r\n        )\r\n    }\r\n)\r\n//            <b> {caption} </b> \r\n//-----------------------------------------------------------------------------------------------------------------\r\nfunction ModalUserAuth(props) { // onLogin, show\r\n    var show = props.show;\r\n    const setShow = (value) => show = value;\r\n\t\r\n    const [enabled, setEnabled] = React.useState(true);\r\n    \r\n    const inputName = React.useRef(null);\r\n    const inputPswd = React.useRef(null);\r\n    const btnLogin = React.useRef(null);\r\n    const focused = React.useRef(inputPswd.current);\r\n\r\n    let refState = React.useRef(cLoginNotAuth);\r\n    function setState(newState) {\r\n        refState.current = newState;\r\n        setTitleState(refState.current);\r\n    }\r\n    const state = () => {return refState.current};\r\n    \r\n    function setFocus() {\r\n        if (inputName.current.value === \"\") { // user's name is empty\r\n            inputName.current.focus();\r\n        } \r\n        else if (inputPswd.current.value === \"\") { // user's password is empty\r\n            inputPswd.current.focus();\r\n        }\r\n        else {\r\n            if (focused.current) {\r\n                focused.current.focus();\r\n            }\r\n        }\r\n    }\r\n\r\n    function close() {\r\n        //setShow(false); //setEnabled(true);\r\n    }\r\n\r\n    function login(e) {\r\n        if (e) {\r\n            e.preventDefault();\r\n        };\r\n        let un =  inputName.current.value;\r\n        let up =  inputPswd.current.value;\r\n        if (un === \"\") { // user's name is empty\r\n            setState(cLoginNotSpecified);\r\n            setFocus();\r\n        } \r\n        else if (up === \"\") { // user's password is empty\r\n            setState(cLoginNotSpecified);\r\n            setFocus();\r\n        } else { // user's name and/or password is/are wrong\r\n            utils.toastsClear();\r\n            setState(cLoginConnecting);\r\n            utils.sleep(1500).then(\r\n                () => {\r\n                    //setEnabled(true);\r\n                    if ((un === \"demo\" && up === \"demo\")) {\r\n                        cfg.user = [\r\n                            {\"name\": \"demo\"}, \r\n                            {\"access rights\": \"read only\"}, \r\n                            {\"account state\": \"active\"},\r\n                            {\"account valid from\": \"01.05.2022\"},\r\n                            {\"account valid till\": \"01.05.2025\"},\r\n                            {password: \"change\", component: \"button\", \r\n                             hint: \"not available for this user\", disabled: true}\r\n                        ];\r\n                        if (props.onLogin && props.onLogin.procedure) {\r\n                            setState(cLoginSuccessAfter);\r\n                            props.onLogin.procedure(close, close);\r\n                        } else {\r\n                            setState(cLoginSuccess);\r\n                            utils.sleep(0).then( ()=>{setEnabled(false)} );\r\n                        }\r\n                    } else {\r\n                        setEnabled(true);\r\n                        setShow(true);\r\n                        setState(cLoginNotFound);\r\n                    }\r\n                }\r\n            );          \r\n            setEnabled(false);\r\n        };\r\n    }\r\n\r\n    const refUserAccountTitle = React.useRef(null);\r\n    function setTitleState(state) {\r\n        refUserAccountTitle.current.setTitle(state);\r\n    }\r\n\r\n    const refButtonAbout = React.useRef(null);\r\n    function setAboutState(state) {\r\n        if (refButtonAbout.current) {\r\n            refButtonAbout.current.setVisible(state);\r\n        }\r\n    }\r\n    \r\n    function onTextChanged(e) {\r\n        if (state() !== cLoginNotAuth) {\r\n            setState(cLoginNotAuth);\r\n            utils.toastsClear();\r\n        }\r\n    }\r\n\r\n    function onKeyPress(e) {\r\n        if (e.charCode === 13) {\r\n            btnLogin.current.focus();\r\n            btnLogin.current.click();\r\n        }\r\n    }\r\n\r\n    function onFocus(e) {\r\n        switch (e.target.id) {\r\n            case \"name\":\r\n                focused.current = inputName.current;\r\n                break;\r\n            case \"password\":\r\n                focused.current = inputPswd.current;\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n\r\n    const Msg = ({ closeToast, toastProps }) => ( //<br/>\r\n        <div>\r\n            <p>This is a demo-application intended for use as a basis for building \r\n            an information system of electricity consumption.</p>\r\n            <p>All the objects on the map are placed randomly and simply numbered instead of assigning individual names. \r\n            The Obolon' district of Kyiv has been selected due to high density of buildings. \r\n            Objects' addresses are being extracted by <a href=\"https://nominatim.openstreetmaps.org\">OpenStreetMap service</a>.</p>\r\n            <p>All the electricity accounting data are emulated.</p>\r\n        </div>\r\n      );\r\n    function about(aOptions = {}) {\r\n        utils.toastAbout(Msg, {\r\n                ...aOptions,\r\n                onOpen:     () => {setAboutState(false); setFocus()},\r\n                onClose:    () => {setAboutState(true); setFocus()}\r\n            }\r\n        );\r\n    }\r\n\r\n    let shown = React.useRef(false);\r\n    React.useEffect( () => {\r\n            if (show !== shown.current) {\r\n                if (cfg.user) {\r\n                    inputName.current.value = cfg.user.reduce(\r\n                        (res, val) => {return val.name && res === \"\"? val.name : res}, \"\"\r\n                    );\r\n                    if (props.show) {\r\n                        //utils.toastsClear();\r\n                        //utils.toastError(\"user's inactivity timeout\", {position: \"top-center\"});\r\n                    };\r\n                    setState(cLoginTimeout);\r\n                } else {\r\n                    inputName.current.value = \"demo\";   //\r\n                    if (cfg.demoAuto) {\r\n                        inputPswd.current.value = \"demo\";\r\n                        utils.toastsClear();\r\n                        login();\r\n                    }\r\n                };\r\n                if (!show && !enabled) {\r\n                    setEnabled(true);\r\n                };\r\n                if (show && !cfg.demoAuto) {\r\n                    about( {delay: 1500} );\r\n                }\r\n            };\r\n            shown.current = show;\r\n            if (show && enabled) {\r\n                setFocus();\r\n            };\r\n        }, [show, enabled] // once upon start\r\n    )\r\n\r\n    let disabled = !enabled;\r\n    let message = refState.current === cLoginSuccessAfter && props.onLogin && props.onLogin.message\r\n                    ?   props.onLogin.message + \"...\"\r\n                    :   \"connecting server...\";\r\n\r\n    return (\r\n        <Modal \tshow={show} centered backdrop=\"static\" keyboard={false} enforceFocus restoreFocus\r\n                size=\"md\" fullscreen_=\"sm-down\" aria-labelledby=\"contained-modal-title-vcenter\" >\r\n            <Modal.Header    className=\"user-auth\">\r\n                <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                    <UserAccountTitle   ref={refUserAccountTitle}/>\r\n                    {/*User's account <span style={{color: clrAccount}}>{strAccount}</span>*/}\r\n                </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Form className=\"inputs\">\r\n                    <Form.Group as={Row} className=\"mb-3\">\r\n                        <Col sm={3}>\r\n                            <Form.Label     column sm={2}  size=\"lg\">name</Form.Label>\r\n                        </Col>\r\n                        <Col>\r\n                            <Form.Control   type=\"text\" placeholder=\"demo\" size=\"lg\" className=\"input\" id=\"name\"\r\n                                            ref={inputName} disabled={disabled}\r\n                                            onChange={onTextChanged} onKeyPress={onKeyPress} onFocus={onFocus}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n                    <Form.Group as={Row} className=\"mb-3\">\r\n                        <Col sm={3}>\r\n                            <Form.Label     column sm={2}>password</Form.Label>\r\n                        </Col>\r\n                        <Col>\r\n                            <Form.Control   type=\"password\" size=\"lg\" className=\"input\" id=\"password\" autoComplete=\"off\"\r\n                                            ref={inputPswd}  disabled={disabled}\r\n                                            onChange={onTextChanged} onKeyPress={onKeyPress} onFocus={onFocus}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n                </Form>\r\n            </Modal.Body>\r\n\t\t\t<Modal.Footer   className=\"user-auth\">\r\n                {(refState.current === cLoginConnecting || refState.current === cLoginSuccessAfter)\r\n                    ?   <table  style={{width: \"100%\"}}>\r\n                            <tbody>\r\n                            <tr style={{height: \"50px\"}}>\r\n                                <td style={{width: \"90%\"}}>\r\n                                    <i>{message}</i>\r\n                                </td>\r\n                                <td>\r\n                                    <Spinner animation=\"border\" variant=\"primary\" size=\"lg\"/>\r\n                                </td>\r\n                            </tr>\r\n                            </tbody>\r\n                        </table>\t\r\n                    :\t<table  style={{width: \"100%\"}}>\r\n                            <tbody>\r\n                            <tr style={{height: \"50px\"}}>\r\n                                <td style={{width: \"10%\"}}>\r\n                                    <ButtonAbout    ref={refButtonAbout} onClick={()=>about()}/>\r\n                                </td>\r\n                                <td style={{width: \"80%\"}}>\r\n                                    <i> for demo purposes please use name/password \"demo/demo\" </i>\r\n                                </td>\r\n                                <td>\r\n                                    <Button ref={btnLogin} variant=\"primary\" disabled={disabled} onClick={login} type=\"submit\">\r\n                                        Login\r\n                                    </Button>            \r\n                                </td>\r\n                            </tr>\r\n                            </tbody>\r\n                        </table>\r\n\t\t\t\t}\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default ModalUserAuth;\r\n//export default React.memo(ModalUserAuth);\r\n","import './ModalObjectInfo.css';\nimport './TableInfo.css';\nimport React from 'react';\nimport Modal from \"react-bootstrap/Modal\";\nimport Spinner from \"react-bootstrap/Spinner\";\nimport Table from \"react-bootstrap/Table\";\nimport Placeholder from \"react-bootstrap/Placeholder\";\nimport Button from \"react-bootstrap/Button\";\nimport {data} from \"./Data.js\";\nimport {utils} from \"./Utils.js\";\n\nfunction CellPlaceHolder(props) {\n\treturn (\n\t\t<Placeholder animation=\"glow\">\n\t\t\t<Placeholder xs={props.size} /> \n\t\t</Placeholder>\n\t)\n}\n\nfunction TablePlaceHolder(props) {\n\tconst rows = [];\n\tfor (let i=0; i < props.rows; i++) \n\t\trows.push({left: 9 + Math.trunc(3*Math.sin(i)), right: 9 + Math.trunc(3*Math.cos(i))});\n\treturn (\n\t\t<>\n\t\t{rows.map( (row, idx) => {\n\t\t\treturn(\n\t\t\t\t<tr key={idx}>\n\t\t\t\t\t<td style={{textAlign: \"left\"}}>\n\t\t\t\t\t\t<CellPlaceHolder size={row.left} />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td style={{textAlign: \"right\"}}>\n\t\t\t\t\t\t<CellPlaceHolder size={row.right} />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t)\n\t\t}\n\t\t)}\n\t\t</>\n\t)\n}\n\nfunction TableInfo(props) {\n\treturn (\n\t\t<>\n\t\t{data.objectInfo.items.map( (entry, index) => {\n\t\t\tif (entry.item) {\n\t\t\t\tlet itemClass = \"table-info-text\";\n\t\t\t\tswitch (entry.note) {\n\t\t\t\t\tcase \"warning\":\n\t\t\t\t\t\titemClass = \"table-info-warning\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"alarm\":\n\t\t\t\t\t\titemClass = \"table-info-alarm\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t};\n\t\t\t\treturn (\n\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t<td style={{textAlign: \"left\"}} className={itemClass}> {entry.item} </td>\n\t\t\t\t\t\t<td style={{textAlign: \"right\"}} className={itemClass}> \n\t\t\t\t\t\t\t{ entry.link\n\t\t\t\t\t\t\t\t?\t<a href={entry.link} target=\"_blank\" rel=\"noopener noreferrer\"> {entry.value} </a>\n\t\t\t\t\t\t\t\t:\tentry.value\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t<td colSpan={2} style={{textAlign: \"center\"}}> <b><i>{entry.value}</i></b> </td>\n\t\t\t\t\t</tr>\n\t\t\t\t)\n\t\t\t}\n\t\t})}\n\t\t</>\n\t)\n}\n\nconst request = {\n\ttimeout: null,\n\tstart: null,\n\tresult: {status: 0, message: \"no requests\"},\n\tonFinish: null,\n\treset: function() {\n\t\tif (this.timeout) {\n\t\t\tclearTimeout(this.timeout);\n\t\t\tthis.timeout = null;\n\t\t}\n\t},\n\tdoTimeout: function(onFinish) {\n\t\tif (this.timeout) {\n\t\t\tthis.result.status = \"\";\n\t\t\tthis.result.message = `server answer timeout ${Date.now() - this.start} ms`;\n\t\t\tthis.reset();\n\t\t\tthis.onFinish();\n\t\t}\n\t},\n\tdoSuccess: function() {\n\t\tif (this.timeout) {\n\t\t\tthis.reset();\n\t\t\tthis.result.status = 200;\n\t\t\tthis.result.message = `data received in ${Date.now() - this.start} ms`;\n\t\t\tthis.onFinish();\n\t\t};\n\t},\n\tget: function (timeout, onFinish, dataOwner, getData) {\n\t\t\tthis.result = {status: 200, message: `data querying...`};\n\t\t\tthis.onFinish = onFinish;\n\t\t\tthis.timeout = setTimeout(this.doTimeout.bind(this), timeout);\n\t\t\tthis.start = Date.now();\n\t\t\tgetData(dataOwner, this.timeout, this.doSuccess.bind(this), this.result);\n\t}\n}\n\nfunction getObjInfo(object, notTimeoutOver, onSuccess, result) {\n\tlet info = [];\n\tconst MS_PER_DAY = 1000 * 60 * 60 * 24;\n\tlet dt0 = (new Date(new Date().getFullYear(), 0, 1)).valueOf();\n\t\n\tinfo.push( {item: \"\", value: \"location\"} );\n\tinfo.push( {item: \"post address\", value: object.post_address} );\n\tinfo.push( {item: \"longtude\", value: object.coord.lon} );\n\tinfo.push( {item: \"lattitude\", value: object.coord.lat} );\n\tinfo.push( {item: \"installation location\", value: `service room, box #${Math.trunc(Math.sin(object.id)**2 * 10 + 1)}`} );\n\t\n\tinfo.push( {item: \"\", value: \"measuring equipment\"} );\n\tinfo.push( {item: \"data controller\", value: \"NiK KS-02-03\", link: \"https://nik.net.ua/en/product/controller-data-collection-ks-02-03\"} );\n\n\tinfo.push( {item: \"serial no.\", value: (utils.genRandonInteger(10000, 999999, object.id*3 + 3)).toString().padStart(8, '0')} );\n\tlet dt = utils.genRandomDate(dt0, -7, 4, object.id);\n\tinfo.push( {item: \"date of manufacture\", value: utils.formatDate(dt)} );\n\tlet dt_inst = utils.genRandomDate(dt, 0, 1, 2*object.id);\n\tinfo.push( {item: \"date of installation\", value: utils.formatDate(dt_inst)} );\n\tinfo.push( {item: \"seal no.\", value: utils.genRandonInteger(100, 999, object.id*3 + 3)} );\n\tdt = utils.genRandomDate(Date.now(), 0, 1, 2*object.id);\n\tif (Math.ceil((dt - Date.now()) / MS_PER_DAY) < 30) {\n\t\tinfo.push( {item: \"next verification date\", value: utils.formatDate(dt), note: \"warning\"} )\n\t} else {\n\t\tinfo.push( {item: \"next verification date\", value: utils.formatDate(dt)} )\n\t};\n\tinfo.push( {item: \"channel\", value: `${object.rs485Count} x RS-485`} );\n\tinfo.push( {item: \"meters\", value: object.metersCount} );\n\n\tinfo.push( {item: \"\", value: \"communication equipment\"} );\n\tinfo.push( {item: \"communication controller\", value: \"NiK KK-01-10\", link: \"https://nik.net.ua/en/product/switching-controller-kk1-10\"} );\n\tinfo.push( {item: \"serial no.\", value: (utils.genRandonInteger(10000, 999999, object.id*7 + 7)).toString().padStart(8, '0')} );\n\tdt = utils.genRandomDate(dt0, -8, 3, object.id);\n\tinfo.push( {item: \"date of manufacture\", value: utils.formatDate(dt)} );//info.push( {item: \"date of manufacture\", value: utils.formatDate(Date.now() - (3 + Math.sin(2*object.id)) * year)} );\n\tinfo.push( {item: \"date of installation\", value: utils.formatDate(dt_inst)} );//info.push( {item: \"date of installation\", value: utils.formatDate(Date.now() - (2 + Math.sin(2*object.id)) * year)} );\n\tinfo.push( {item: \"seal no.\", value: utils.genRandonInteger(100, 999, object.id*7 + 7)} );\n\tdt = utils.genRandomDate(Date.now(), 0, 2, 3*object.id);\n\tif (Math.ceil((dt - Date.now()) / MS_PER_DAY) < 30) {\n\t\tinfo.push( {item: \"next verification date\", value: utils.formatDate(dt), note: \"warning\"} )\n\t} else {\n\t\tinfo.push( {item: \"next verification date\", value: utils.formatDate(dt)} )\n\t};\n\tinfo.push( {item: \"channel\", value: `${Math.trunc(10 * Math.sin(object.id)**2) % 2 ? \"GSM/GPRS\" : \"GSM/Internet\"}`} );\n\n\tinfo.push( {item: \"\", value: \"servicing\"} );\n\tinfo.push( {item: \"company\", value: \"ObolonEnergoService\"} );\n\tinfo.push( {item: \"address\", value: \"16/2, Dobryninskaya street, Obolonskyi district, Kyiv, 04176, Ukraine\"} );\n\tinfo.push( {item: \"phone no.\", value: \"38 (044) 123-45-67\"} );\n\tutils.sleep(2500).then( () => {\n\t\t\tif (notTimeoutOver) {\n\t\t\t\tdata.objectInfo.obj = object;\n\t\t\t\tdata.objectInfo.items = info;\n\t\t\t\tdata.objectInfo.time = Date.now();\n\t\t\t\tresult.status = 200;\n\t\t\t\tresult.message = \"\";\n\t\t\t\tonSuccess();\n\t\t\t}\n\t\t}\n\t)\n}\n\n//-----------------------------------------------------------------------------------------------------------\nconst ModalObjectInfo = React.forwardRef( (props, ref) => { // onHide, setStatus\n\t\tconst [loading, setLoading] = React.useState(false);\n\t\tconst [objectInfo, setobjectInfo] = React.useState( {show: false, idxObj: -1} );\n\t\tReact.useImperativeHandle(ref, () => (\n\t\t\t\t{ setShowObjectInfo: (value) => setobjectInfo( value ) } // value: {show, idxObj}\n\t\t\t)\n\t\t);\n\n\t\tlet obj = objectInfo.idxObj >= 0 && objectInfo.idxObj < data.objects.length \n\t\t\t\t? data.objects[objectInfo.idxObj] \n\t\t\t\t: null;\n\t\tlet obj_new = obj !== data.objectInfo.obj;\n\n\t\tconst refTable = React.useRef(null);\n\n\t\tReact.useEffect(\t() => {\n\t\t\t\t\t\t\t\tif (obj) {\n\t\t\t\t\t\t\t\t\tif (loading) \n\t\t\t\t\t\t\t\t\t\tprops.setStatus(\"requesting object info ...\")\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tprops.setStatus(\"\");\n\t\t\t\t\t\t\t\t\t\tif (refTable.current)\n\t\t\t\t\t\t\t\t\t\t\trefTable.current.focus();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, [loading]); \n\t\tif (obj && obj_new && !loading) {\n\t\t\tsetLoading(true);\n\t\t\treturn null;\n\t\t};\n\n\t\tconst nItems = data.objectInfo.items.length > 0 ? data.objectInfo.items.length : 25;\n\t\tif (obj) {\n\t\t\tif (loading) {\n\t\t\t\trequest.get(5000, ()=>setLoading(false), obj, getObjInfo);\n\t\t\t} else {\n\t\t\t\trequest.result = {status: 200, message: \"data has been received\"};\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<Modal \tshow={objectInfo.show} onHide={props.onHide}\n\t\t\t\t\t\tsize=\"lg\" aria-labelledby=\"contained-modal-title-vcenter\" centered scrollable \n\t\t\t\t\t\tdialogClassName=\"modal-50w\" fullscreen=\"lg-down\" _container={props.container}>\n\t\t\t\t\t<Modal.Header closeButton>\n\t\t\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\n\t\t\t\t\t\t\t{obj.name}\n\t\t\t\t\t\t</Modal.Title>\n\t\t\t\t\t</Modal.Header>\n\t\t\t\t\t<Modal.Body>\n\t\t\t\t\t{request.result.status === 200 &&\n\t\t\t\t\t\t\t<Table size=\"sm\" tabIndex=\"0\" ref={refTable}>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t{(loading)\n\t\t\t\t\t\t\t\t\t\t?\t<TablePlaceHolder rows={nItems}/>\n\t\t\t\t\t\t\t\t\t\t:\t<TableInfo/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{request.result.status !== 200 &&\n\t\t\t\t\t\t\trequest.result.message\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t\t<Modal.Footer style={{justifyContent: \"space-between\"}}>\n\t\t\t\t\t\t{(loading)\n\t\t\t\t\t\t\t?\t<>\n\t\t\t\t\t\t\t\t<span style={{marginLeft_: \"10px\"}}><i>connecting server...</i></span>\n\t\t\t\t\t\t\t\t<Spinner animation=\"border\" variant=\"primary\" size=\"lg\"/>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t:\t<>\n\t\t\t\t\t\t\t\t{request.result.status === 200\n\t\t\t\t\t\t\t\t\t? \t<span><i> data received on {utils.formatDateTime(data.objectInfo.time)} </i></span>\n\t\t\t\t\t\t\t\t\t: \t<span><i> \n\t\t\t\t\t\t\t\t\t\t\t{request.result.status === \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t?\t\"server not answering\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \t\"HTTP status: \" + request.result.status \n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</i></span>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t<Button className=\"btn\" style={{align: \"left\"}} variant=\"outline-light\" size=\"sm\" \n\t\t\t\t\t\t\t\t\t\ttitle=\"refresh data\" aria-label=\"refresh\" onClick={()=>setLoading(true)} >\n\t\t\t\t\t\t\t\t\t<img src={process.env.PUBLIC_URL + '/img/refresh_gray.svg'} alt=\"refresh\"/>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t</Modal.Footer>\n\t\t\t\t</Modal>\n\t\t\t);\n\t\t} else {\n\t\t\treturn null\n\t\t}\n\t}\n)\n/*\n\t\t(loading)\n\t\t\t\t\t\t\t\t?\t<Table size=\"sm\" tabIndex=\"0\" ref={refTable}>\n\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t<TablePlaceHolder rows={nItems}/>\n\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t\t:\t<TableInfo/>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n*/\n//export default React.memo(ModalObjectInfo);\nexport default ModalObjectInfo;","import React from 'react';\r\nimport ProgressBar from 'react-bootstrap/ProgressBar';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst UserInactivityStatus = React.forwardRef( (props, ref) => {\r\n        const [timeout, setTimeout] = React.useState( {now: Infinity, max: 0} );\r\n    \r\n        React.useImperativeHandle(ref, () => ({\r\n                setProgress: (value) => setTimeout(value),\r\n            })\r\n        );\r\n\r\n        if ( isFinite(timeout.now) ) {\r\n            if (timeout.now > 0)\r\n                return(\r\n                    <span className=\"userInactivityStatus\"> \r\n                        user's inactivity timeout: {timeout.now} s\r\n                    </span>\r\n                )\r\n            else {\r\n                return null;\r\n            }\r\n        } else\r\n            return null;\r\n    }\r\n)\r\n\r\nconst UserInactivityProgress = React.forwardRef( (props, ref) => {\r\n        const [timeout, setTimeout] = React.useState( {now: Infinity, max: 0} );\r\n        \r\n        React.useImperativeHandle(ref, () => ({\r\n                setProgress: (value) => setTimeout(value),\r\n            })\r\n        );\r\n        \r\n        let now = isFinite(timeout.now) ? timeout.now : 0;\r\n        let max = now ? timeout.max : 100;\r\n        let visibility = (now <= 0) ? {visibility: \"hidden\"} : {visibility: \"visible\"};\r\n        return(\r\n            <ProgressBar    className=\"userInactivityProgress\" \r\n                            max={max} now={now} style={visibility} \r\n            />\r\n        ) \r\n    }\r\n)\r\n\r\nconst  UserInactivityToast = React.forwardRef( (props, ref) => {\r\n        const toastId = React.useRef(null);\r\n        const progress = React.useRef(null);\r\n        function dismiss() {\r\n            if (toastId.current) {\r\n                toast.dismiss(toastId.current);\r\n                //toastId.current = null;\r\n            }\r\n        };\r\n        \r\n        function show(timeout) {\r\n            progress.current = timeout.now / timeout.max;\r\n            let msg = timeout.now > 0 ? `...    ${timeout.now}s left` : \"\";\r\n            msg = \"User's inactivity timeout\" + msg;\r\n            let options = { position: \"top-center\", type: toast.TYPE.WARNING, hideProgressBar: false,\r\n                            progress: progress.current, closeButton: false, \r\n                            className: 'toast-info-container', containerId: 'info',\r\n                            onClose: () => toastId.current = null };\r\n            if (timeout.now <= 0) {\r\n                options = {...options, autoClose: false, type: toast.TYPE.ERROR, closeButton: true};\r\n            }\r\n            if (toastId.current && toast.isActive(toastId.current)) {\r\n                    toast.update(toastId.current, { ...options, render: msg });\r\n                } else {\r\n                    toast.dismiss();\r\n                    toastId.current = toast(msg, options);\r\n                }\r\n        }\r\n        React.useImperativeHandle(ref, () => (\r\n                {   setProgress: (timeout) => {\r\n                        if ( isFinite(timeout.now) ) {\r\n                                show(timeout);\r\n                            } else {\r\n                                dismiss();\r\n                            }\r\n                        } \r\n                }\r\n\r\n            )\r\n        );\r\n        \r\n        return(null);\r\n    }\r\n)\r\n\r\nexport {UserInactivityStatus, UserInactivityProgress, UserInactivityToast};","import React from \"react\";\r\nimport { Button, Modal, Table } from \"react-bootstrap\";\r\nimport { cfg } from \"./Cfg\";\r\n\r\nexport const ModalUserInfo = React.forwardRef( (props, ref) => {\r\n//export function ModalUserInfo() {\r\n    const [show, setShow] = React.useState(false);\r\n\r\n    React.useImperativeHandle(ref, () => (\r\n            { showUserInfo: (visible = true) => setShow(visible) } \r\n        )\r\n    );\r\n\r\n    function tableCell(aData, aKey, aStyle = {}) {\r\n        let style = {...aStyle};\r\n        if ( typeof aData === \"object\" ) {\r\n            let text = aData[aKey] ? aData[aKey] : null;\r\n            if (!text && Object.keys(aData).length > 0) {\r\n                text = aData[Object.keys(aData)[0]]\r\n            };\r\n            if (!text) {\r\n                return null;\r\n            }\r\n            let title = aData.hint;\r\n            let comp = aData.component;\r\n            let disabled = aData.disabled ? aData.disabled : false;\r\n            switch (comp) {\r\n                case \"button\": return (\r\n                    <span title={title} style={style}>\r\n                        <Button disabled={disabled}> \r\n                            {text} \r\n                        </Button>\r\n                    </span>\r\n                );\r\n                default: return (\r\n                    <span title={title} style={style}> {text} </span>\r\n                );\r\n            }\r\n        } else if ( typeof aData === \"string\" ) {\r\n            return (\r\n                <span style={style}> {aData} </span>\r\n            )\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    if (show) {\r\n        return (\r\n            <Modal \tshow={show} onHide={ () => setShow(false) }\r\n                    size=\"sm\" aria-labelledby=\"contained-modal-title-vcenter\" \r\n                    centered scrollable autoFocus\r\n                    dialogClassName=\"modal-70w\" fullscreen=\"sm-down\" >\r\n                <Modal.Header className=\"user-auth\" closeButton>\r\n                    <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                        User's Info\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Table size=\"sm\" tabIndex=\"0\" >\r\n                        <tbody>\r\n                            {cfg.user.map((item, index) => {\r\n                                let key = Object.keys(item)[0];\r\n                                return (\r\n                                    <tr key={index} style={{verticalAlign: \"middle\"}}>\r\n                                        <td style={{textAlign: \"start\"}}> {tableCell(key)} </td>\r\n                                        <td style={{textAlign: \"end\"}}> {tableCell(item, key)} </td>\r\n                                    </tr>\r\n                                )\r\n                            })}\r\n                        </tbody>\r\n                    </Table>\r\n                </Modal.Body>\r\n            </Modal>\r\n        );\r\n    } else {\r\n        return null\r\n    }\r\n})","import React from 'react';\nimport './AppMeters.css';\nimport { ToastContainer, Flip } from 'react-toastify';//https://fkhadra.github.io/react-toastify/introduction\nimport \"react-toastify/dist/ReactToastify.css\";\nimport {cfg, appTitle} from \"./Cfg.js\";\nimport {data} from './Data.js';\n//import Meter from './Meter.js';\nimport NavBar from './NavBar.js';\nimport MeterCards from './MeterCards.js';\nimport MeterBars from './MeterBars.js';\nimport SlidePanelLeft from './SlidePanelLeft.js';\nimport SlidePanelRight from './SlidePanelRight.js';\nimport Instruments from './Instruments.js';\nimport ObjectList from './ObjectList.js';\nimport LlMap from './LlMap.js';\nimport ModalUserAuth from './ModalUserAuth.js';\nimport ModalObjectInfo from './ModalObjectInfo.js';\nimport {NetOperation} from './NetOperation.js';\n//import {UserInactivityStatus, UserInactivityProgress, UserInactivityToast} from './UserInactivityIndicator.js';\nimport {UserInactivityToast} from './UserInactivityIndicator.js';\nimport {utils} from './Utils.js';\nimport { ModalUserInfo } from './ModalUserInfo';\n\nfunction AppMeters(props) {\n\t\tconst refBadWindow = React.useRef(false);\n\t\tconst [badWindow, setBadWindow] = React.useState(false);\n\t\tconst [instrumentsDisabled, setInstrumentsDisabled] = React.useState(false);\n\t\tconst [filter, setFilter] = React.useState(\"\");\n\t\tconst [mapTooltips, setMapTooltips] = React.useState(true);\n\t\t//const [objectInfo, setObjectInfo] = React.useState( objObjectInfo(-1) );\n\t\t//const objectInfo = null; // не нужно!!\t\n\t\tconst [statusMessage, setStatusMessage] = React.useState(\"\");\n\t\tconst [netOperation, setNetOperation] = React.useState( {procedure: null, onFinish: null, onError: null, setStatus: null} );\n\t\tconst [metersState, setMetersState] = React.useState( {unflipAll: false, closeAll: false} );\n\t\t// eslint-disable-next-line\n\t\tconst [_, forceUpdate] = React.useReducer(x=>!x, true);\n\t\t//const [userTimeout, setUserTimeout] = React.useState( {now: 0, max: 60} );\n\t\tconst userTimeout = React.useRef( {now: 0, max: 60} );\n\n\t\tconst refSlidePanelLeft = React.useRef(null);\n\t\tconst refSlidePanelRight = React.useRef(null);\n\n\t\tReact.useEffect( () => {\n\t\t\t\tcfg.init();\n\t\t\t\tonResized();\n\t\t\t\tcfg.sizeTileIdx = Math.min(1, cfg.sizes.widthIdx);\n\t\t\t\twindow.addEventListener(\"resize\", onResized);\n\t\t\t\treturn( () => {\n\t\t\t\t\twindow.removeEventListener(\"resize\", onResized);\n\t\t\t\t})\n\t\t\t}, [] // once upon start\n\t\t)\n\n\t\tfunction onResized() {\n\t\t\tlet errWindowSize = window.innerWidth < 340 || window.innerHeight < 600;\n\t\t\tif (!refBadWindow.current && errWindowSize) {\n\t\t\t\trefBadWindow.current = true;\n\t\t\t\tsetBadWindow(true);\n\t\t\t\tprops.pauseTimeout();\n\t\t\t} else {\n\t\t\t\tif (refBadWindow.current && !errWindowSize) {\n\t\t\t\t\trefBadWindow.current = false;\n\t\t\t\t\tsetBadWindow(false);\n\t\t\t\t\tprops.resumeTimeout( userTimeout.current.now, callbackUserTimeout );\n\t\t\t\t}\n\t\t\t\tlet widthIdx = cfg.sizes.widthCard.reduce( (result, value, index) => {\n\t\t\t\t\t\tlet widthLeftPanel = window.innerWidth < 576 ? 0 : cfg.sizes.widthLeftPanel;\n\t\t\t\t\t\treturn window.innerWidth - widthLeftPanel - 50 > value ? index : result;\n\t\t\t\t\t}, 0);\n\t\t\t\tif (cfg.sizes.widthIdx !== widthIdx) {\n\t\t\t\t\tcfg.sizes.widthIdx = widthIdx;\n\t\t\t\t\t// let doChange = (window.innerWidth < 576);\n\t\t\t\t\t// if (doChange) {\n\t\t\t\t\t// \t//cfg.sizeTileIdx = widthIdx;\n\t\t\t\t\t// }\n\t\t\t\t\tif (cfg.sizes.onWidthIdxChanged) {\n\t\t\t\t\t\tcfg.sizes.onWidthIdxChanged(widthIdx, window.innerWidth < 576);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction onLogin(fOnLogin, fOnAfterLoginError) {\n\t\t\tconst doOnLogin = () => {\n\t\t\t\t\tprops.startTimeout( callbackUserTimeout );\n\t\t\t\t\tif (fOnLogin)\n\t\t\t\t\t\tfOnLogin();\n\t\t\t\t\tforceUpdate();\n\t\t\t\t};\n\t\t\tconst doOnAfterLoginError = () => {\n\t\t\t\t\tprops.pauseTimeout( callbackUserTimeout );\n\t\t\t\t\tif (fOnAfterLoginError)\n\t\t\t\t\t\tfOnAfterLoginError();\n\t\t\t\t};\n\t\t\tif (data.objects.length === 0) {\n\t\t\t\tgetObjects(doOnLogin, doOnAfterLoginError);\n\t\t\t} else {\n\t\t\t\tdoOnLogin();\n\t\t\t};\n\t\t}\n\n\t\tfunction getObjects(doOnLogin, doOnError) {\n\t\t\tsetStatusMessage(\"requesting available objects ...\");\n\t\t\tsetNetOperation(\t{\tprocedure: data.getObjects, \n\t\t\t\t\t\t\t\t\tonFinish:\t() => {\n\t\t\t\t\t\t\t\t\t\t\tdoOnLogin();\n\t\t\t\t\t\t\t\t\t\t\tonGetObjects();\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonError:\t() => {\n\t\t\t\t\t\t\t\t\t\t\tdoOnError();\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tsetStatus: setStatus\n\t\t\t\t\t\t\t\t} \n\t\t\t);\n\t\t}\n\t\tfunction onGetObjects() {\n\t\t\tutils.toastSuccess(\"object available: \" + data.objects.length)\t\t\n\t\t\tsetStatusMessage(\"\");\n\t\t\tsetNetOperation({procedure: null, onFinish: null, setStatus: null});\n\t\t}\n\t\t\n\t\t//const refUserInactivityStatus = React.useRef(null);\n\t\t//const refUserInactivityProgress = React.useRef(null);\n\t\tconst refUserInactivityToast = React.useRef(null);\n\t\t\n\t\tfunction callbackUserTimeout(timeout, timeoutLast) {\n\t\t\tuserTimeout.current = {now: timeout, max: timeoutLast};\n\t\t\t//refUserInactivityStatus.current.setProgress( userTimeout.current );\n\t\t\t//refUserInactivityProgress.current.setProgress( userTimeout.current );\n\t\t\trefUserInactivityToast.current.setProgress( userTimeout.current );\n\t\t\tif (timeout <= 0) {\n\t\t\t\tshowObjectInfo(false);\n\t\t\t\tshowUserInfo(false);\n\t\t\t\tforceUpdate();\n\t\t\t}\n\t\t}\n\n\t\tconst setStatus = React.useCallback( (message) => {\n\t\t\t\tsetStatusMessage(message);\n\t\t\t}, [statusMessage]\n\t\t)\n\n\t\tfunction objObjectInfo(idx) {\n\t\t\treturn idx >= 0 ? {show: true, idxObj: idx} : {show: false, idxObj: -1};\n\t\t}\n\t\tconst refModalObjectInfo = React.useRef(null);\n\t\tconst showObjectInfo  = React.useCallback( (idx) => {\n\t\t\t\trefModalObjectInfo.current.setShowObjectInfo( objObjectInfo(idx) );\n\t\t\t}, [cfg.currentObj]\n\t\t)\n\t\tfunction onHideObjectInfo(idx) {\n\t\t\trefModalObjectInfo.current.setShowObjectInfo( objObjectInfo(-1) );\n\t\t}\n\n\t\tconst refModalUserInfo = React.useRef(null);\n\t\tconst showUserInfo  = React.useCallback( (show) => {\n\t\t\t\trefModalUserInfo.current.showUserInfo(show);\n\t\t\t}, []\n\t\t)\n\n\t\tconst onBtnOffcanvasObjectListOrInstruments = React.useCallback( () => {\n\t\t\t\trefSlidePanelLeft.current.show(); \n\t\t\t}, [cfg.currentObj]\n\t\t)\n\n\t\tconst onBtnOffcanvasTogglerMapOrObject  = React.useCallback( () => {\n\t\t\t\trefSlidePanelRight.current.open(); \n\t\t\t}, [cfg.currentObj]\n\t\t)\n\n\t\tconst onObjChanged = React.useCallback( (object) => {\n\t\t\t\tsetFilter(\"\");\n\t\t\t\tsetMapTooltips(false);\n\t\t\t\tsetTimeout(\t() => {\n\t\t\t\t\t\tsetMapTooltips(true);\n\t\t\t\t\t\tsetStatusMessage(\"\");\n\t\t\t\t\t}, 0\n\t\t\t\t);\n\t\t\t}, [cfg.currentObject, data.objects]\n\t\t)\n\t\t\n\t\tconst onSelectTab = React.useCallback( () => {\t\t\t\t\t\t// переход карта <-> счетчики\n\t\t\t\trefSlidePanelLeft.current.setState({show: false});\n\t\t\t\tif (cfg.currentTabIdx === 1)\t\t// счетчики\n\t\t\t\t\tif (cfg.currentObj === data.meters.obj) {\n\t\t\t\t\t\tforceUpdate(); //setFilter(filter)\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdata.resetMeters();\n\t\t\t\t\t\tsetStatusMessage(\"requesting meters data ...\");\n\t\t\t\t\t\tsetInstrumentsDisabled(true);\n\t\t\t\t\t\tsetNetOperation({procedure: data.getMeters, onFinish: onGetMeters, setStatus: setStatus});\n\t\t\t\t\t}\n\t\t\t\telse\t\t\t\t\t\t\t\t// карта\n\t\t\t\t\tforceUpdate();// setFilter(filter);\n\t\t\t}, [cfg.currentTabIdx]\n\t\t)\n\n\t\tconst onDataChanged = React.useCallback( () => {\t// запрос данных счетчиков\n\t\t\t\tdata.resetData();\n\t\t\t\tsetStatusMessage(\"requesting meters data ...\");\n\t\t\t\tsetMetersState( previousState => {return { ...previousState, unflipAll: true } } );\n\t\t\t\tsetInstrumentsDisabled(true);\n\t\t\t\t//setUnflipAll(true);\n\t\t\t\tsetNetOperation( {procedure: data.getMeters, onFinish: onGetMeters, setStatus: setStatus} );\n\t\t\t\t///setNetFinish(onGetMeters);\n\t\t\t}, [cfg.monthIdx]\n\t\t)\n\n\t\tfunction onGetMeters(result) {\t\t\t\t\t\t// конец получения данных счетчиков\n\t\t\tif (result.message)\n\t\t\t\tutils.toastSuccess(\"meters available: \" + data.meters.items.length)\n\t\t\tdata.meters.items.sort( cfg.sortMeters );\n\t\t\tupdateMeters();\n\t\t\tsetInstrumentsDisabled(false);\n\t\t}\n\t\n\t\tconst onViewChanged = React.useCallback( () => {\n\t\t\t\tonSortChanged(false);\n\t\t\t}, [cfg.viewIdx]\n\t\t)\n\n\t\tconst onSortChanged = React.useCallback( (reSort = true) => {\n\t\t\t\tif (cfg.viewIdx === 0 && reSort) {\n\t\t\t\t\tsetStatusMessage(\"sorting ...\");\n\t\t\t\t\tsetMetersState( previousState => {return { ...previousState, closeAll: true } } );\n\t\t\t\t\t//setCloseAll(true); \t\n\t\t\t\t\tsetTimeout(\t\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tsetTimeout( \n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\tdata.meters.items.sort( cfg.sortMeters );\n\t\t\t\t\t\t\t\t\tsetMetersState( {unflipAll: true, closeAll: true} );\n\t\t\t\t\t\t\t\t\t//setCloseAll(true); setUnflipAll(true);\n\t\t\t\t\t\t\t\t\tsetTimeout(\n\t\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(updateMeters, 500)\n\t\t\t\t\t\t\t\t\t\t}, 0 \n\t\t\t\t\t\t\t\t\t); \n\t\t\t\t\t\t\t\t}, 500\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}, 0 \n\t\t\t\t\t)\n\t\t\t\t} else if (cfg.viewIdx === 1 && reSort) {\n\t\t\t\t\tsetStatusMessage(\"sorting ...\");\n\t\t\t\t\tdata.onMetersChanged(true,\n\t\t\t\t\t\t\t\t\t\t() =>\t{\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout( \n\t\t\t\t\t\t\t\t\t\t\t\t() => \t{\t\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata.meters.items.sort( cfg.sortMeters );\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata.onMetersChanged(false, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t() =>\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => setStatusMessage(\"\"), 500)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t\t\t\t\t\t1000\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} else if (cfg.viewIdx === 1 || !reSort) {\n\t\t\t\t\tsetStatusMessage(\"sorting ...\");\n\t\t\t\t\tsetMetersState( previousState => {return { ...previousState, unflipAll: true } } );\n\t\t\t\t\t//setUnflipAll(true);\n\t\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t\t\t\t\tif (reSort)\n\t\t\t\t\t\t\t\t\t\tdata.meters.items.sort( cfg.sortMeters ); \n\t\t\t\t\t\t\t\t\tupdateMeters();\n\t\t\t\t\t\t\t\t}, 0\n\t\t\t\t\t)\t\t\t\n\t\t\t\t}\n\t\t\t}, [cfg.sortKindIdx, cfg.sortAsc]\n\t\t)\n\t\t\n\t\tconst onFilterChanged = React.useCallback( (f) => {\n\t\t\t\tcfg.filter = f;\n\t\t\t\tif (cfg.viewIdx === 0) {\n\t\t\t\t\tsetFilter(f);\n\t\t\t\t\tsetTimeout( () => {updateMeters()}, 0);\n\t\t\t\t} else if (cfg.viewIdx === 1) {\n\t\t\t\t\tdata.onMetersChanged(false);\n\t\t\t\t\t//this.onSortChanged(true);\n\t\t\t\t} else {};\n\t\t\t}, [cfg.filter]\n\t\t)\n\n\t\tconst onSizeChanged = React.useCallback( (sizeIdx) => {\n\t\t\t\tsetMetersState( previousState => {return { ...previousState, closeAll: true } } );\n\t\t\t\tsetTimeout(\t\n\t\t\t\t\t() => {\n\t\t\t\t\t\tsetTimeout( \n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tcfg.sizeTileIdx = sizeIdx;\n\t\t\t\t\t\t\t\tsetMetersState( {closeAll: true} );\n\t\t\t\t\t\t\t\tsetTimeout(\n\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\tsetTimeout(updateMeters, 500)\n\t\t\t\t\t\t\t\t\t}, 0 \n\t\t\t\t\t\t\t\t); \n\t\t\t\t\t\t\t}, 500\n\t\t\t\t\t\t);\n\t\t\t\t\t}, 0 \n\t\t\t\t)\n\t\t\t\t//forceUpdate();\n\t\t\t}, [cfg.sizeTileIdx]\n\t\t)\n\n\t\tfunction updateMeters() {\n\t\t\tif (cfg.viewIdx === 0) {\n\t\t\t\tsetFilter(filter);\n\t\t\t\tsetStatusMessage(\"\");\n\t\t\t\tsetNetOperation({procedure: null, onFinish: null, setStatus: null});\n\t\t\t\t//setNetFinish(null);\n\t\t\t\tsetMetersState( {unflipAll: false, closeAll: false} );\n\t\t\t\t//setUnflipAll(false); setCloseAll(false);\n\t\t\t} else if (cfg.viewIdx === 1) { //if MeterBars need to be updated\n\t\t\t\tsetFilter(filter);\n\t\t\t\tsetStatusMessage(\"\");\n\t\t\t\tsetNetOperation({procedure: null, onFinish: null, setStatus: null});\n\t\t\t\tsetMetersState( {unflipAll: false, closeAll: false} );\n\t\t\t\t//setUnflipAll(false);\tsetCloseAll(false);\n\t/*\n\t\t\t\tcfg.viewIdx = 2; // 1st delete MeterBars\n\t\t\t\tthis.setState( {filter: this.state.filter, statusMessage: \"\", netOperation: null, netFinish: null, unflipAll: false, closeAll: false}, \n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\tcfg.viewIdx = 1; //2nd recreate MeterBars\n\t\t\t\t\t\t\t\t\tthis.setState( {filter: this.state.filter} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t*/\n\t\t\t}\n\t\t}\n\t\t\n\t\tconst refContent = React.useRef(null);\n\t\t\n\t\tif (badWindow) {\n\t\t\treturn (\n\t\t\t\t<div style={ {position: \"fixed\", top: \"50%\", left: \"50%\", transform: \"translate(-50%, -50%)\"} }>\n\t\t\t\t\t<p>Window size is not enough for this application</p>\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\n\t\tlet mainClass = (cfg.currentTabIdx === 1) ? \"main-cards\" : \"main-map\";\n\t\tlet emWidth = utils.pxToEm(window.innerWidth, document.getElementById(\"main\"));\n\t\tconst emMax = 57;\n\t\tlet toastAboutWidth = \"100%\";\n\t\tif (emWidth > emMax) {\n\t\t\ttoastAboutWidth = emMax + \"em\";//100*emMax/emWidth + \"%\";\n\t\t}\n\t\t\n\t\t// let showForBadWindow = (badWindow) ? {display: \"block\", zIndex: \"2000\"} : {display: \"none\"};\n\t\t// // let hideForBadWindow = (badWindow) ? {display: \"none\"} : {display: \"block\"};\n\t\t// <div style={ {...showForBadWindow, ...{position: \"fixed\", top: \"50%\", left: \"50%\", transform: \"translate(-50%, -50%)\"}} } >\n\t\t// \t\t \t<p>Window size is not enough for this application</p>\n\t\t// \t\t</div>\n\t\t// \t\t<div style={hideForBadWindow}></div>\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<NavBar title={appTitle} \n\t\t\t\t\t\tonBtnOffcanvasObjectListOrInstruments={onBtnOffcanvasObjectListOrInstruments}\n\t\t\t\t\t\tonBtnOffcanvasTogglerMapOrObject={onBtnOffcanvasTogglerMapOrObject}\n\t\t\t\t\t\tonSelectTab={onSelectTab} disabled={instrumentsDisabled}\n\t\t\t\t\t\tshowUserInfo={showUserInfo}\n\t\t\t\t/>\n\t\t\t\t<div id=\"content\" ref={refContent} >\n\t\t\t\t\t<div id=\"left\" className=\"not-for-sm\">\n\t\t\t\t\t\t{\t(cfg.currentTabIdx === 0) &&\n\t\t\t\t\t\t\t<ObjectList \tonChanged={onObjChanged} showObjectInfo={showObjectInfo}\n\t\t\t\t\t\t\t\t\t\t\tonSelectTab={onSelectTab}\t\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{\t(cfg.currentTabIdx === 1) &&\n\t\t\t\t\t\t\t<Instruments \tonViewChanged={onViewChanged} onSortChanged={onSortChanged} \n\t\t\t\t\t\t\t\t\t\t\tonSizeChanged={onSizeChanged} onObjectInfo={showObjectInfo}\n\t\t\t\t\t\t\t\t\t\t\tonFilterChanged={onFilterChanged} _filter={filter}\n\t\t\t\t\t\t\t\t\t \t\tonDataChanged={onDataChanged} disabled={instrumentsDisabled}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"main\" className={mainClass}>\n\t\t\t\t\t\t{\t(cfg.currentTabIdx === 0) && //null\n\t\t\t\t\t\t\t <LlMap tooltips={mapTooltips} onChanged={onObjChanged}/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{\t(cfg.currentTabIdx === 1) &&\n\t\t\t\t\t\t\tcfg.viewIdx === 0\n\t\t\t\t\t\t\t\t? \t<MeterCards filter={filter} setStatus={setStatusMessage} \n\t\t\t\t\t\t\t\t\t\t\t\tmetersState={metersState} cardSize={cfg.sizeTileIdx} />\n\t\t\t\t\t\t\t\t: \t(cfg.viewIdx === 1) \n\t\t\t\t\t\t\t\t\t? \t<MeterBars \tfilter={filter} netOperation={netOperation.procedure}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmetersState={metersState} /> \n\t\t\t\t\t\t\t\t\t: \tnull\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<ModalUserAuth\t\tshow={userTimeout.current.now <= 0} \n\t\t\t\t\t\t\t\t\t\tonLogin={{procedure: onLogin, message: \"requesting objects available\"}}\n\t\t\t\t\t/>\n\t\t\t\t\t<ModalObjectInfo \tref={refModalObjectInfo}\tcontainer={refContent.current}\n\t\t\t\t\t\t\t\t\t\tonHide={onHideObjectInfo}\tsetStatus={setStatusMessage}\n\t\t\t\t\t/>\n\t\t\t\t\t<ModalUserInfo\t\tref={refModalUserInfo}\t/>\n\t\t\t\t\t<NetOperation\t\tparams={netOperation}\tstatusMessage={statusMessage}/>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"btm\" className=\"bg-secondary\">\n\t\t\t\t\t{/* <UserInactivityProgress \tref={refUserInactivityProgress} /> */}\n\t\t\t\t\t<Status message={statusMessage}/>\n\t\t\t\t\t{/* <UserInactivityStatus \tref={refUserInactivityStatus} /> */}\n\t\t\t\t</div>\n\t\t\t\t<SlidePanelLeft\tref={refSlidePanelLeft} \t\t\ttitle={appTitle} \n\t\t\t\t\t\t\t\tonObjChanged={onObjChanged} \t\tshowObjectInfo={showObjectInfo}\n\t\t\t\t\t\t\t\tonSelectTab={onSelectTab}\t\t\tonViewChanged={onViewChanged}\n\t\t\t\t\t\t\t\tonSortChanged={onSortChanged} \t\tonSizeChanged={onSizeChanged}\n\t\t\t\t\t\t\t\tonFilterChanged={onFilterChanged} \tfilter={filter}\n\t\t\t\t/>\n\t\t\t\t<SlidePanelRight\tref={refSlidePanelRight} \t\ttitle={appTitle} \n\t\t\t\t\t\t\t\t\tonSelectTab={onSelectTab}\t\tonViewChanged={onViewChanged}\n\t\t\t\t\t\t\t\t\tdisabled={instrumentsDisabled}\n\t\t\t\t\t\t\t\t\tshowUserInfo={showUserInfo}\n\t\t\t\t/>\n\t\t\t\t<ToastContainer hideProgressBar closeOnClick transition={Flip} \n\t\t\t\t\t\t\t\tenableMultiContainer containerId={'info'}\n\t\t\t\t/>\n\t\t\t\t<ToastContainer hideProgressBar closeOnClick transition={Flip} \n\t\t\t\t\t\t\t\tenableMultiContainer containerId={'about'} style={{width: toastAboutWidth}}\n\t\t\t\t\t\t\t\ttoastStyle_={{backgroundColor: \"rgba(150, 150, 150, 0.85)\"}}\n\t\t\t\t/>\n\t\t\t\t<UserInactivityToast\tref={refUserInactivityToast}\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n}\n\nconst Status = React.memo(\n\tfunction Status(props) {\n\t\tif (props.message === \"\") \n\t\t\treturn\t(<span className=\"statusPassive\"> demo mode: all the data are emulated </span>)\n\t\telse\t\n\t\t\treturn\t(<span className=\"statusActive\"> {props.message} </span>);\n\t}\n)\n\nexport default AppMeters;\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport React from 'react';\n//import ReactDOM from 'react-dom';\nimport { createRoot } from 'react-dom/client';\nimport AppMeters from './AppMeters';\nimport UserActivity from \"./UserActivity\";\n\nconst root = createRoot(document.getElementById('root')); // createRoot(container!) if you use TypeScript\nconst App = UserActivity(AppMeters, 2, 1); // <- HOC\n\nroot.render(\n    <App/>    \n);\n//<AppMeters/>\n//ReactDOM.render(<App />, document.getElementById('root'););\n","import React from 'react';\r\n\r\nexport default function UserActivity(WrappedComponent, timeoutMinutes, timeoutLast = 1) {\r\n    return function(props) {\r\n        let timer = null;\r\n        let cTimeout = timeoutMinutes * 60  + 2;\r\n        let cTimeoutLast = timeoutLast * 60;\r\n        let timeout = 0;\r\n        let setLastTimeout = null;\r\n        \r\n        React.useEffect( () => {\r\n                return ( () => {\r\n                    if (timer)\r\n                        clearInterval(timer);\r\n                    }\r\n                )\r\n            }\r\n        )\r\n        function callbackTimeout(timeout) {\r\n            if (setLastTimeout) {\r\n                setLastTimeout(timeout, cTimeoutLast);\r\n            }\r\n        }\r\n        function doTimeout() {\r\n            if (timeout === Infinity)\r\n                return;\r\n            timeout--;\r\n            if (timeout <= 0) {\r\n                clearInterval(timer);\r\n                timer = null;\r\n                callbackTimeout(0);\r\n            } else if (timeout > cTimeoutLast) {\r\n                ; //this.getTimeout(Infinity)\r\n            } else {\r\n                callbackTimeout(timeout);\r\n            }\r\n        }\r\n        function resetTimeout(event) {\r\n            if (timer) {\r\n                let b = (timeout <= cTimeoutLast);\r\n                timeout = cTimeout;\r\n                if (b)\r\n                    callbackTimeout(Infinity);\r\n            }\r\n        }\r\n        function startTimeout(fSetLastTimeout) {\r\n            if (!timer) {\r\n                timeout = cTimeout;\r\n                setLastTimeout = fSetLastTimeout;\r\n                timer = setInterval(doTimeout, 1000);\r\n                callbackTimeout(Infinity);\r\n            }\r\n        }\r\n        function pauseTimeout(fSetLastTimeout) {\r\n            timeout = Infinity;\r\n            setLastTimeout = fSetLastTimeout;\r\n            callbackTimeout(Infinity);\r\n        }\r\n        function resumeTimeout(aTimeout = cTimeout, fSetLastTimeout) {\r\n            if (timer) {\r\n                timeout = aTimeout;\r\n                setLastTimeout = fSetLastTimeout;\r\n                //callbackTimeout(timeout);\r\n            }\r\n        }\r\n\r\n        return(\r\n                <div    onKeyDown={resetTimeout} onMouseMove={resetTimeout} onClick={resetTimeout} \r\n                        style={{position: \"fixed\", display: \"contents\"}}>\r\n                    <WrappedComponent   startTimeout={startTimeout}  pauseTimeout={pauseTimeout} resumeTimeout={resumeTimeout} />\r\n                </div>\r\n        )\r\n    } \r\n}\r\n//{...this.props}\r\n"],"sourceRoot":""}